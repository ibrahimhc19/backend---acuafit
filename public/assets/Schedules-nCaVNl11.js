import{j as e,B as l,r as c,e as u}from"./index-xPKywDfd.js";import{u as D,D as w,a as R,b as N,c as v,d as H,e as I,T as E,f as M,g as m,h as _,i as p,j as K,k as j,l as L}from"./dialog-DBQi0lTD.js";import{t as P,F as $,a as g,b,c as f,d as y,e as F,o as k,s as S}from"./form-DhxdOxcp.js";import{u as A}from"./index.esm-CvJ4J2kZ.js";import{I as T}from"./createLucideIcon-CCxgHhNs.js";import"./index-CVteYqHp.js";import"./index-DW9zZLzp.js";const B=k({nombre:S().min(2,{message:"El nombre de la sede es obligatorio"}),direccion:S().min(2,{message:"La dirección de la sede es obligatorio"})});function O(){const s=A({resolver:P(B),defaultValues:{nombre:"",direccion:"-"}});function o(r){console.log(r)}return e.jsx($,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(o),className:"space-y-8",children:[e.jsx(g,{control:s.control,name:"nombre",render:({field:r})=>e.jsxs(b,{children:[e.jsx(f,{children:"Nombre"}),e.jsx(y,{children:e.jsx(T,{...r})}),e.jsx(F,{})]})}),e.jsx(g,{control:s.control,name:"direccion",render:({field:r})=>e.jsxs(b,{children:[e.jsx(f,{children:"Dirección"}),e.jsx(y,{children:e.jsx(T,{...r})}),e.jsx(F,{})]})}),e.jsx(l,{type:"submit",children:"Submit"})]})})}function G({columns:s,data:o}){var x;const r=D({data:o,columns:s,getCoreRowModel:L(),manualPagination:!0}),[n,a]=c.useState(null),[d,h]=c.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"scroll-m-20 flex-wrap text-3xl font-semibold text-primary mb-8",children:"Listado de Horarios"}),e.jsxs("div",{className:"rounded-md border",children:[d&&n&&e.jsx(w,{open:d,onOpenChange:h,children:e.jsxs(R,{children:[e.jsx(N,{children:e.jsx(v,{children:"Editar Sede"})}),e.jsx(O,{}),e.jsxs(H,{children:[e.jsx(I,{asChild:!0,children:e.jsx(l,{variant:"outline",children:"Cancelar"})}),e.jsx(l,{type:"submit",children:"Guardar"}),e.jsx(l,{variant:"destructive",type:"submit",disabled:!0,children:"Eliminar"})]})]})}),e.jsxs(E,{children:[e.jsx(M,{children:r.getHeaderGroups().map(i=>e.jsx(m,{children:i.headers.map(t=>e.jsx(_,{children:t.isPlaceholder?null:p(t.column.columnDef.header,t.getContext())},t.id))},i.id))}),e.jsx(K,{className:"text-gray-600",children:(x=r.getRowModel().rows)!=null&&x.length?r.getRowModel().rows.map(i=>e.jsx(m,{onClick:()=>{a(i.original),h(!0)},className:"hover:text-muted hover:bg-primary cursor-pointer",children:i.getVisibleCells().map(t=>e.jsx(j,{className:"py-0.5",children:p(t.column.columnDef.cell,t.getContext())},t.id))},i.id)):e.jsx(m,{children:e.jsx(j,{colSpan:s.length,className:"h-8 text-center",children:"No hay resultados"})})})]})]})]})}const C=s=>{const[o,r,n]=s.split(":"),a=new Date;return a.setHours(parseInt(o),parseInt(r),parseInt(n)),a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},V=[{accessorKey:"id",header:"#",cell:({row:s})=>s.index+1},{accessorKey:"tipo_grupo",header:"Grupo",accessorFn:s=>`${s.tipo_grupo}`},{accessorKey:"sede.nombre",header:"Sede"},{accessorKey:"hora_inicio",header:"Hora de inicio",accessorFn:s=>`${C(s.hora_inicio)}`},{accessorKey:"hora_fin",header:"Hora de fin",accessorFn:s=>`${C(s.hora_fin)}`}];u.defaults.withCredentials=!0;u.defaults.withXSRFToken=!0;function Y(){const[s,o]=c.useState([]),r="https://acuafit.up.railway.app/horarios";return c.useEffect(()=>{u.get(r).then(n=>{const a=n.data;a&&a.data&&Array.isArray(a.data)?o(a.data):(console.error("La respuesta de la API no tiene el formato esperado:",a),o([]))}).catch(n=>{console.error("Error al obtener los datos:",n),o([])})},[r]),e.jsx("div",{className:"container mx-auto px-6 py-4 lg:px-8 min-h-[68vh]",children:e.jsx(G,{data:s,columns:V})})}export{Y as default};
