import{r as d,j as e,B as c,e as h}from"./index-BU3KmKrm.js";import{u as R,D as N,a as v,b as H,c as I,d as E,e as M,T as _,f as K,g as u,h as L,i as j,j as P,k as g,l as $}from"./dialog-Di9ffTS2.js";import{I as b}from"./createLucideIcon-bcLY2WPC.js";import{t as k,F as A,a as f,b as y,c as F,d as S,e as T,o as B,s as C}from"./form-DmTls32w.js";import{u as O}from"./index.esm-Db0Xf4ul.js";import"./index-_gSNe-VT.js";const G=B({nombre:C().min(2,{message:"El nombre de la sede es obligatorio"}),direccion:C().min(2,{message:"La dirección de la sede es obligatoria"})});function V({columns:s,data:n}){var p;const o=R({data:n,columns:s,getCoreRowModel:$(),manualPagination:!0}),[i,a]=d.useState(null),[m,x]=d.useState(!1),l=O({resolver:k(G),defaultValues:{nombre:"",direccion:"-"}});function w(r){console.log(r)}return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"scroll-m-20 flex-wrap text-3xl font-semibold text-primary mb-8",children:"Listado de Horarios"}),e.jsxs("div",{className:"rounded-md border",children:[m&&i&&e.jsx(N,{open:m,onOpenChange:x,children:e.jsxs(v,{children:[e.jsx(H,{children:e.jsx(I,{children:"Editar Sede"})}),e.jsx(A,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(w),className:"space-y-8",children:[e.jsx(f,{control:l.control,name:"nombre",render:({field:r})=>e.jsxs(y,{children:[e.jsx(F,{children:"Nombre"}),e.jsx(S,{children:e.jsx(b,{...r})}),e.jsx(T,{})]})}),e.jsx(f,{control:l.control,name:"direccion",render:({field:r})=>e.jsxs(y,{children:[e.jsx(F,{children:"Dirección"}),e.jsx(S,{children:e.jsx(b,{...r})}),e.jsx(T,{})]})}),e.jsx(c,{type:"submit",children:"Submit"})]})}),e.jsxs(E,{children:[e.jsx(M,{asChild:!0,children:e.jsx(c,{variant:"outline",children:"Cancelar"})}),e.jsx(c,{type:"submit",children:"Guardar"}),e.jsx(c,{variant:"destructive",type:"submit",disabled:!0,children:"Eliminar"})]})]})}),e.jsxs(_,{children:[e.jsx(K,{children:o.getHeaderGroups().map(r=>e.jsx(u,{children:r.headers.map(t=>e.jsx(L,{children:t.isPlaceholder?null:j(t.column.columnDef.header,t.getContext())},t.id))},r.id))}),e.jsx(P,{className:"text-gray-600",children:(p=o.getRowModel().rows)!=null&&p.length?o.getRowModel().rows.map(r=>e.jsx(u,{onClick:()=>{a(r.original),x(!0)},className:"hover:text-muted hover:bg-primary cursor-pointer",children:r.getVisibleCells().map(t=>e.jsx(g,{className:"py-0.5",children:j(t.column.columnDef.cell,t.getContext())},t.id))},r.id)):e.jsx(u,{children:e.jsx(g,{colSpan:s.length,className:"h-8 text-center",children:"No hay resultados"})})})]})]})]})}const D=s=>{const[n,o,i]=s.split(":"),a=new Date;return a.setHours(parseInt(n),parseInt(o),parseInt(i)),a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},U=[{accessorKey:"id",header:"#",cell:({row:s})=>s.index+1},{accessorKey:"tipo_grupo",header:"Grupo",accessorFn:s=>`${s.tipo_grupo}`},{accessorKey:"sede.nombre",header:"Sede"},{accessorKey:"hora_inicio",header:"Hora de inicio",accessorFn:s=>`${D(s.hora_inicio)}`},{accessorKey:"hora_fin",header:"Hora de fin",accessorFn:s=>`${D(s.hora_fin)}`}];h.defaults.withCredentials=!0;h.defaults.withXSRFToken=!0;function Y(){const[s,n]=d.useState([]),o="https://acuafit.up.railway.app/horarios";return d.useEffect(()=>{h.get(o).then(i=>{const a=i.data;a&&a.data&&Array.isArray(a.data)?n(a.data):(console.error("La respuesta de la API no tiene el formato esperado:",a),n([]))}).catch(i=>{console.error("Error al obtener los datos:",i),n([])})},[o]),e.jsx("div",{className:"container mx-auto px-6 py-4 lg:px-8 min-h-[68vh]",children:e.jsx(V,{data:s,columns:U})})}export{Y as default};
