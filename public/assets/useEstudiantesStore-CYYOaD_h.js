import{m as d}from"./index-Dmyin_YZ.js";import{d as h}from"./react-CaX28FCb.js";const w=async(e,r,a)=>{var t,s,n,o;try{if(r&&(r==null?void 0:r.trim())!=="")return(await d.get(`client/buscar?q=${encodeURIComponent(r)}&per_page=${a}${e?`&page=${e}`:""}`)).data;{const i=new URLSearchParams;return a&&i.append("per_page",a.toString()),e&&i.append("page",e),(await d.get(`client/estudiantes?${i.toString()}`)).data}}catch(i){const c=i,l=((s=(t=c.response)==null?void 0:t.data)==null?void 0:s.message)??"Error inesperado",p=(o=(n=c.response)==null?void 0:n.data)==null?void 0:o.validationErrors;throw{message:l,validationErrors:p}}},y=async e=>{var r,a,t,s;try{return(await d.get(`client/estudiante/${e}`)).data}catch(n){const o=n,i=((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)??"Error inesperado",c=(s=(t=o.response)==null?void 0:t.data)==null?void 0:s.validationErrors;throw{message:i,validationErrors:c}}},v=async e=>{var r,a,t,s;try{return(await d.post("client/estudiante",e)).data}catch(n){const o=n,i=((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)??"Error inesperado",c=(s=(t=o.response)==null?void 0:t.data)==null?void 0:s.validationErrors;throw{message:i,validationErrors:c}}},x=async(e,r)=>{var a,t,s,n;try{return(await d.patch(`client/estudiante/${e}`,r)).data}catch(o){const i=o,c=((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message)??"Error inesperado",l=(n=(s=i.response)==null?void 0:s.data)==null?void 0:n.validationErrors;throw{message:c,validationErrors:l}}},$=async e=>{var r,a,t,s;try{return(await d.delete(`client/estudiante/${e}`)).data}catch(n){const o=n,i=((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)??"Error inesperado",c=(s=(t=o.response)==null?void 0:t.data)==null?void 0:s.validationErrors;throw{message:i,validationErrors:c}}},P=h((e,r)=>({estudiantes:[],selectedEstudiante:null,loading:!1,pagination:"",per_page:10,query:void 0,error:null,pageLinks:{first_page_url:"",last_page_url:"",next_page_url:null,prev_page_url:null},pageNumRefs:{current_page:1,last_page:1,per_page:10,from:0,to:0,total:0,next_page:null},fetchEstudiantes:async(a,t,s)=>{e({loading:!0,error:null});try{const n=await w(a,t,s),{current_page:o,last_page:i,per_page:c,from:l,to:p,total:u,next_page:g,first_page_url:_,last_page_url:E,next_page_url:m,prev_page_url:f}=n;e({pageNumRefs:{current_page:o,last_page:i,per_page:c,from:l,to:p,total:u,next_page:g}}),e({pageLinks:{first_page_url:_,last_page_url:E,next_page_url:m,prev_page_url:f}}),e({estudiantes:n.data})}catch(n){e({error:n.message||"Error al cargar estudiantes"})}finally{e({loading:!1})}},handlePageChange:async a=>{const t=r().pageLinks;function s(n){const o=n.split("=");return o.length>=4?o[3]:o[1]}switch(a){case"first":e({pagination:s(t.first_page_url)});break;case"previous":e({pagination:s(t.prev_page_url??"")});break;case"next":e({pagination:s(t.next_page_url??"")});break;case"last":e({pagination:s(t.last_page_url??"")});break}},setQuery:a=>{e({query:a})},setPerPage:a=>{e({per_page:a})},createEstudiante:async a=>{await v(a),await r().fetchEstudiantes()},updateEstudiante:async(a,t)=>{await x(a,t),await r().fetchEstudiantes()},deleteEstudiante:async a=>{await $(a),await r().fetchEstudiantes()},getEstudianteById:async a=>await y(a),selectEstudiante:a=>{e({selectedEstudiante:a})}}));export{P as u};
