import{m as p}from"./index-CwaTN-0C.js";import{d as h}from"./react-DQXrYy-l.js";const w=async(a,r,e)=>{var t,s,n,o;try{if(r&&(r==null?void 0:r.trim())!=="")return(await p.get(`client/buscar?q=${encodeURIComponent(r)}&per_page=${e}${a?`&page=${a}`:""}`)).data;{const i=new URLSearchParams;return e&&i.append("per_page",e.toString()),a&&i.append("page",a),(await p.get(`client/estudiantes?${i.toString()}`)).data}}catch(i){const c=i,d=((s=(t=c.response)==null?void 0:t.data)==null?void 0:s.message)??"Error inesperado",l=(o=(n=c.response)==null?void 0:n.data)==null?void 0:o.errors;throw{message:d,validationErrors:l}}},y=async a=>{var r,e,t,s;try{return(await p.get(`client/estudiante/${a}`)).data}catch(n){const o=n,i=((e=(r=o.response)==null?void 0:r.data)==null?void 0:e.message)??"Error inesperado",c=(s=(t=o.response)==null?void 0:t.data)==null?void 0:s.errors;throw{message:i,validationErrors:c}}},x=async a=>{var r,e,t,s;try{return(await p.post("client/estudiante",a)).data}catch(n){const o=n,i=((e=(r=o.response)==null?void 0:r.data)==null?void 0:e.message)??"Error inesperado",c=(s=(t=o.response)==null?void 0:t.data)==null?void 0:s.errors;throw{message:i,validationErrors:c}}},v=async(a,r)=>{var e,t,s,n;try{return(await p.patch(`client/estudiante/${a}`,r)).data}catch(o){const i=o,c=((t=(e=i.response)==null?void 0:e.data)==null?void 0:t.message)??"Error inesperado",d=(n=(s=i.response)==null?void 0:s.data)==null?void 0:n.errors;throw{message:c,validationErrors:d}}},$=async a=>{var r,e,t,s;try{return(await p.delete(`client/estudiante/${a}`)).data}catch(n){const o=n,i=((e=(r=o.response)==null?void 0:r.data)==null?void 0:e.message)??"Error inesperado",c=(s=(t=o.response)==null?void 0:t.data)==null?void 0:s.errors;throw{message:i,validationErrors:c}}},P=h((a,r)=>({estudiantes:[],selectedEstudiante:null,loading:!1,pagination:"",per_page:10,query:void 0,error:null,pageLinks:{first_page_url:"",last_page_url:"",next_page_url:null,prev_page_url:null},pageNumRefs:{current_page:1,last_page:1,per_page:10,from:0,to:0,total:0,next_page:null},fetchEstudiantes:async(e,t,s)=>{a({loading:!0,error:null});try{const n=await w(e,t,s),{current_page:o,last_page:i,per_page:c,from:d,to:l,total:u,next_page:g,first_page_url:_,last_page_url:E,next_page_url:m,prev_page_url:f}=n;a({pageNumRefs:{current_page:o,last_page:i,per_page:c,from:d,to:l,total:u,next_page:g}}),a({pageLinks:{first_page_url:_,last_page_url:E,next_page_url:m,prev_page_url:f}}),a({estudiantes:n.data})}catch(n){a({error:n.message||"Error al cargar estudiantes"})}finally{a({loading:!1})}},handlePageChange:async e=>{const t=r().pageLinks;function s(n){const o=n.split("=");return o.length>=4?o[3]:o[1]}switch(e){case"first":a({pagination:s(t.first_page_url)});break;case"previous":a({pagination:s(t.prev_page_url??"")});break;case"next":a({pagination:s(t.next_page_url??"")});break;case"last":a({pagination:s(t.last_page_url??"")});break}},setQuery:e=>{a({query:e})},setPerPage:e=>{a({per_page:e})},createEstudiante:async e=>{await x(e),await r().fetchEstudiantes()},updateEstudiante:async(e,t)=>{await v(e,t),await r().fetchEstudiantes()},deleteEstudiante:async e=>{await $(e),await r().fetchEstudiantes()},getEstudianteById:async e=>await y(e),selectEstudiante:e=>{a({selectedEstudiante:e})}}));export{P as u};
