import{j as e,S as we,c as y,b as Re,L as Ie,d as Pe,e as oe,r as m,P,f as ae,g as ke,R as g,h as Se,B as N,t as Z,F as Te,i as te}from"./index-B68FPR2t.js";import{u as De,P as Oe,D as Me,a as Le,b as $e,c as He,d as Ve,e as ze,T as Ee,f as Fe,g as F,h as Ke,i as ee,j as Be,k as re,l as qe}from"./dialog-DErrb08G.js";import{T as w,a as R,b as I}from"./tooltip-Do1snehb.js";import{I as Ge}from"./input-MrkMzyxz.js";import{c as Ue,u as Qe,C as Xe,S as Ye,a as Je,b as We,d as Ze,e as er,f as rr,g as nr}from"./select-vH0h2Mgg.js";import{u as B,a as se,c as ie,P as or}from"./react-CBwzHIFZ.js";import{t as ne}from"./timeFormatter-DNfpeksr.js";import{u as le}from"./useEstudiantesStore-De0ucLij.js";import{c as O}from"./createLucideIcon-D4_0xV8z.js";import"./index-Da6X_LYB.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],tr=O("chevron-left",ar);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ir=O("chevron-right",sr);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],cr=O("chevrons-left",lr);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],ur=O("chevrons-right",dr),xr=Re("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function pr({className:n,variant:o,asChild:a=!1,...t}){const s=a?we:"span";return e.jsx(s,{"data-slot":"badge",className:y(xr({variant:o}),n),...t})}const hr=n=>[{accessorKey:"id",header:"#",cell:({row:o})=>o.index+n},{id:"acudiente",cell:({row:o})=>o.original.acudiente_id?e.jsx(pr,{className:"h-5 min-w-5 rounded-full px-1 font-mono tabular-nums",variant:"secondary",asChild:!0,children:e.jsx(Ie,{to:"#",children:"A"})}):null},{id:"nombresCompletos",accessorFn:o=>`${o.nombres} ${o.apellidos}`,header:"Nombres completos"},{accessorKey:"edad",header:"Edad"},{accessorKey:"correo",header:"Correo electrónico"},{accessorKey:"telefono",header:"Teléfono"},{accessorKey:"sede.nombre",header:"Sede"},{id:"horario",header:"Horario",accessorFn:o=>`${o.horario.dia_semana}`}];function mr({className:n,...o}){return e.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:y("mx-auto flex w-full justify-center",n),...o})}function fr({className:n,...o}){return e.jsx("ul",{"data-slot":"pagination-content",className:y("flex flex-row items-center gap-1",n),...o})}function gr({...n}){return e.jsx("li",{"data-slot":"pagination-item",...n})}function br({className:n,isActive:o,size:a="icon",...t}){return e.jsx("a",{"aria-current":o?"page":void 0,"data-slot":"pagination-link","data-active":o,className:y(Pe({variant:o?"outline":"ghost",size:a}),n),...t})}var M="Collapsible",[vr,ce]=oe(M),[jr,q]=vr(M),de=m.forwardRef((n,o)=>{const{__scopeCollapsible:a,open:t,defaultOpen:s,disabled:i,onOpenChange:c,...r}=n,[p,u]=B({prop:t,defaultProp:s??!1,onChange:c,caller:M});return e.jsx(jr,{scope:a,disabled:i,contentId:se(),open:p,onOpenToggle:m.useCallback(()=>u(h=>!h),[u]),children:e.jsx(P.div,{"data-state":U(p),"data-disabled":i?"":void 0,...r,ref:o})})});de.displayName=M;var ue="CollapsibleTrigger",xe=m.forwardRef((n,o)=>{const{__scopeCollapsible:a,...t}=n,s=q(ue,a);return e.jsx(P.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":U(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...t,ref:o,onClick:ie(n.onClick,s.onOpenToggle)})});xe.displayName=ue;var G="CollapsibleContent",pe=m.forwardRef((n,o)=>{const{forceMount:a,...t}=n,s=q(G,n.__scopeCollapsible);return e.jsx(or,{present:a||s.open,children:({present:i})=>e.jsx(Cr,{...t,ref:o,present:i})})});pe.displayName=G;var Cr=m.forwardRef((n,o)=>{const{__scopeCollapsible:a,present:t,children:s,...i}=n,c=q(G,a),[r,p]=m.useState(t),u=m.useRef(null),h=ae(o,u),f=m.useRef(0),j=f.current,C=m.useRef(0),A=C.current,v=c.open||r,l=m.useRef(v),x=m.useRef(void 0);return m.useEffect(()=>{const d=requestAnimationFrame(()=>l.current=!1);return()=>cancelAnimationFrame(d)},[]),ke(()=>{const d=u.current;if(d){x.current=x.current||{transitionDuration:d.style.transitionDuration,animationName:d.style.animationName},d.style.transitionDuration="0s",d.style.animationName="none";const _=d.getBoundingClientRect();f.current=_.height,C.current=_.width,l.current||(d.style.transitionDuration=x.current.transitionDuration,d.style.animationName=x.current.animationName),p(t)}},[c.open,t]),e.jsx(P.div,{"data-state":U(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!v,...i,ref:h,style:{"--radix-collapsible-content-height":j?`${j}px`:void 0,"--radix-collapsible-content-width":A?`${A}px`:void 0,...n.style},children:v&&s})});function U(n){return n?"open":"closed"}var Nr=de,yr=xe,Ar=pe,b="Accordion",_r=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Q,wr,Rr]=Ue(b),[L,Jr]=oe(b,[Rr,ce]),X=ce(),he=g.forwardRef((n,o)=>{const{type:a,...t}=n,s=t,i=t;return e.jsx(Q.Provider,{scope:n.__scopeAccordion,children:a==="multiple"?e.jsx(Sr,{...i,ref:o}):e.jsx(kr,{...s,ref:o})})});he.displayName=b;var[me,Ir]=L(b),[fe,Pr]=L(b,{collapsible:!1}),kr=g.forwardRef((n,o)=>{const{value:a,defaultValue:t,onValueChange:s=()=>{},collapsible:i=!1,...c}=n,[r,p]=B({prop:a,defaultProp:t??"",onChange:s,caller:b});return e.jsx(me,{scope:n.__scopeAccordion,value:g.useMemo(()=>r?[r]:[],[r]),onItemOpen:p,onItemClose:g.useCallback(()=>i&&p(""),[i,p]),children:e.jsx(fe,{scope:n.__scopeAccordion,collapsible:i,children:e.jsx(ge,{...c,ref:o})})})}),Sr=g.forwardRef((n,o)=>{const{value:a,defaultValue:t,onValueChange:s=()=>{},...i}=n,[c,r]=B({prop:a,defaultProp:t??[],onChange:s,caller:b}),p=g.useCallback(h=>r((f=[])=>[...f,h]),[r]),u=g.useCallback(h=>r((f=[])=>f.filter(j=>j!==h)),[r]);return e.jsx(me,{scope:n.__scopeAccordion,value:c,onItemOpen:p,onItemClose:u,children:e.jsx(fe,{scope:n.__scopeAccordion,collapsible:!0,children:e.jsx(ge,{...i,ref:o})})})}),[Tr,$]=L(b),ge=g.forwardRef((n,o)=>{const{__scopeAccordion:a,disabled:t,dir:s,orientation:i="vertical",...c}=n,r=g.useRef(null),p=ae(r,o),u=wr(a),f=Qe(s)==="ltr",j=ie(n.onKeyDown,C=>{var J;if(!_r.includes(C.key))return;const A=C.target,v=u().filter(E=>{var W;return!((W=E.ref.current)!=null&&W.disabled)}),l=v.findIndex(E=>E.ref.current===A),x=v.length;if(l===-1)return;C.preventDefault();let d=l;const _=0,H=x-1,V=()=>{d=l+1,d>H&&(d=_)},z=()=>{d=l-1,d<_&&(d=H)};switch(C.key){case"Home":d=_;break;case"End":d=H;break;case"ArrowRight":i==="horizontal"&&(f?V():z());break;case"ArrowDown":i==="vertical"&&V();break;case"ArrowLeft":i==="horizontal"&&(f?z():V());break;case"ArrowUp":i==="vertical"&&z();break}const _e=d%x;(J=v[_e].ref.current)==null||J.focus()});return e.jsx(Tr,{scope:a,disabled:t,direction:s,orientation:i,children:e.jsx(Q.Slot,{scope:a,children:e.jsx(P.div,{...c,"data-orientation":i,ref:p,onKeyDown:t?void 0:j})})})}),D="AccordionItem",[Dr,Y]=L(D),be=g.forwardRef((n,o)=>{const{__scopeAccordion:a,value:t,...s}=n,i=$(D,a),c=Ir(D,a),r=X(a),p=se(),u=t&&c.value.includes(t)||!1,h=i.disabled||n.disabled;return e.jsx(Dr,{scope:a,open:u,disabled:h,triggerId:p,children:e.jsx(Nr,{"data-orientation":i.orientation,"data-state":Ae(u),...r,...s,ref:o,disabled:h,open:u,onOpenChange:f=>{f?c.onItemOpen(t):c.onItemClose(t)}})})});be.displayName=D;var ve="AccordionHeader",je=g.forwardRef((n,o)=>{const{__scopeAccordion:a,...t}=n,s=$(b,a),i=Y(ve,a);return e.jsx(P.h3,{"data-orientation":s.orientation,"data-state":Ae(i.open),"data-disabled":i.disabled?"":void 0,...t,ref:o})});je.displayName=ve;var K="AccordionTrigger",Ce=g.forwardRef((n,o)=>{const{__scopeAccordion:a,...t}=n,s=$(b,a),i=Y(K,a),c=Pr(K,a),r=X(a);return e.jsx(Q.ItemSlot,{scope:a,children:e.jsx(yr,{"aria-disabled":i.open&&!c.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...r,...t,ref:o})})});Ce.displayName=K;var Ne="AccordionContent",ye=g.forwardRef((n,o)=>{const{__scopeAccordion:a,...t}=n,s=$(b,a),i=Y(Ne,a),c=X(a);return e.jsx(Ar,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...c,...t,ref:o,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});ye.displayName=Ne;function Ae(n){return n?"open":"closed"}var Or=he,Mr=be,Lr=je,$r=Ce,Hr=ye;function Vr({...n}){return e.jsx(Or,{"data-slot":"accordion",...n})}function k({className:n,...o}){return e.jsx(Mr,{"data-slot":"accordion-item",className:y("border-b last:border-b-0",n),...o})}function S({className:n,children:o,...a}){return e.jsx(Lr,{className:"flex",children:e.jsxs($r,{"data-slot":"accordion-trigger",className:y("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-2 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",n),...a,children:[o,e.jsx(Xe,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function T({className:n,children:o,...a}){return e.jsx(Hr,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...a,children:e.jsx("div",{className:y("pt-0 pb-4",n),children:o})})}function zr({columns:n,data:o}){var v;const a=De({data:o,columns:n,getCoreRowModel:qe(),manualPagination:!0}),[t,s]=m.useState(!1),i=Se(),{selectEstudiante:c,selectedEstudiante:r,pageNumRefs:p,pageLinks:u,handlePageChange:h,query:f,setQuery:j,setPerPage:C,deleteEstudiante:A}=le();return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"scroll-m-20 flex-wrap text-3xl font-semibold text-primary",children:"Listado de Estudiantes"}),e.jsxs("div",{className:"flex w-full justify-between my-4 gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ge,{type:"search",placeholder:"Buscar",value:f,onChange:l=>j(l.target.value)}),e.jsxs(w,{children:[e.jsx(R,{asChild:!0,children:e.jsx(N,{variant:"outline",className:"hover:bg-primary hover:text-white",onClick:()=>j(""),children:"Limpiar"})}),e.jsx(I,{children:"Limpia la barra de búsqueda"})]})]}),e.jsxs(w,{children:[e.jsx(R,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"sm",className:"hover:bg-primary hover:text-white flex justify-self-end h-9 cursor-pointer",onClick:()=>{c(null),i("/registro",{replace:!0})},children:e.jsx(Oe,{})})}),e.jsx(I,{children:e.jsx("p",{children:"Crea un nuevo registro"})})]})]}),t&&r&&e.jsx(Me,{open:t,onOpenChange:l=>{s(l)},children:e.jsxs(Le,{children:[e.jsx($e,{children:e.jsx(He,{className:"text-2xl text-left"})}),e.jsxs(Vr,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(k,{value:"item-1",children:[e.jsx(S,{className:"font-bold text-[16px]",children:"Detalles del Estudiante"}),e.jsxs(T,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombre completo:"})," ",r.nombres," ",r.apellidos]}),e.jsxs("p",{children:[e.jsx("b",{children:"Edad:"})," ",r.edad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Documento:"})," ",r.tipo_documento," ",r.documento_identidad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo:"})," ",r.correo]}),e.jsxs("p",{children:[e.jsx("b",{children:"Teléfono:"})," ",r.telefono]}),e.jsxs("p",{children:[e.jsx("b",{children:"Dirección:"})," ",r.direccion]}),e.jsxs("p",{children:[e.jsx("b",{children:"RUT:"})," ",r.rut??"N/A"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Acepta el reglamento:"})," ",r.acepta_reglamento?"Sí":"No"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Autoriza uso de imagen:"})," ",r.autoriza_uso_imagen?"Sí":"No"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Observaciones:"})," ",r.observaciones??"N/A"]})]})]}),r.acudiente&&e.jsxs(k,{value:"item-2",children:[e.jsx(S,{className:"font-bold text-[16px]",children:"Detalle del Acudiente"}),e.jsxs(T,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombres:"})," ",r==null?void 0:r.acudiente.nombres," ",r==null?void 0:r.acudiente.apellidos]}),e.jsxs("p",{children:[e.jsx("b",{children:"Documento:"})," ",r==null?void 0:r.acudiente.tipo_documento," ",r==null?void 0:r.acudiente.documento_identidad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Teléfono:"})," ",r==null?void 0:r.acudiente.telefono]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo:"})," ",r==null?void 0:r.acudiente.email]})]})]}),e.jsxs(k,{value:"item-3",children:[e.jsx(S,{className:"font-bold text-[16px]",children:"Detalles de la Sede"}),e.jsxs(T,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombre:"})," ",r==null?void 0:r.sede.nombre]}),e.jsxs("p",{children:[e.jsx("b",{children:"Dirección:"})," ",(r==null?void 0:r.sede.direccion)??"N/A"]})]})]}),e.jsxs(k,{value:"item-4",children:[e.jsx(S,{className:"font-bold text-[16px]",children:"Detalles del Horario"}),e.jsxs(T,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Día de la semana:"})," ",r==null?void 0:r.horario.dia_semana]}),e.jsxs("p",{children:[e.jsx("b",{children:"Hora de inicio:"})," ",ne(r==null?void 0:r.horario.hora_inicio)]}),e.jsxs("p",{children:[e.jsx("b",{children:"Hora de fin:"})," ",ne(r==null?void 0:r.horario.hora_fin)]})]})]})]}),e.jsxs(Ve,{children:[e.jsx(ze,{asChild:!0,children:e.jsx(N,{variant:"outline",children:"Cancelar"})}),e.jsx(N,{onClick:()=>{const l=r==null?void 0:r.id;c(null),i(`/registro/${l}`,{replace:!0})},children:"Editar"}),e.jsx(N,{variant:"destructive",type:"submit",onClick:async()=>{if(r!=null&&r.id)try{await A(r.id),Z.success("El estudiante fue eliminado correctamente."),c(null),s(!1)}catch(l){Z.error("No se pudo eliminar el estudiante. Intenta de nuevo."),console.error("Error al eliminar",l)}},disabled:!0,children:"Eliminar"})]})]})}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Ee,{children:[e.jsx(Fe,{children:a.getHeaderGroups().map(l=>e.jsx(F,{children:l.headers.map(x=>e.jsx(Ke,{children:x.isPlaceholder?null:ee(x.column.columnDef.header,x.getContext())},x.id))},l.id))}),e.jsx(Be,{className:"text-gray-600",children:(v=a.getRowModel().rows)!=null&&v.length?a.getRowModel().rows.map(l=>e.jsx(F,{onClick:()=>{c(l.original),s(!0)},className:"hover:text-muted hover:bg-primary cursor-pointer",children:l.getVisibleCells().map(x=>e.jsx(re,{className:"py-0.5",children:ee(x.column.columnDef.cell,x.getContext())},x.id))},l.id)):e.jsx(F,{children:e.jsx(re,{colSpan:n.length,className:"h-8 text-center",children:"No hay resultados"})})})]})}),e.jsx("div",{className:"flex flex-row justify-end items-center mb-4 sm:mb-0",children:e.jsxs("div",{className:"flex items-center justify-end py-4 space-x-1",children:[e.jsxs(Ye,{defaultValue:"10",onValueChange:l=>C(Number(l)),children:[e.jsx(Je,{children:e.jsx(We,{placeholder:"Cantidad"})}),e.jsx(Ze,{children:e.jsxs(er,{children:[e.jsx(rr,{children:"Filas"}),Te.map((l,x)=>e.jsx(nr,{value:l.value.toString(),children:l.label},x))]})})]}),e.jsxs(w,{children:[e.jsx(R,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"sm",onClick:()=>h("first"),disabled:u.prev_page_url===null,className:"hover:bg-primary hover:text-white hidden sm:block",children:e.jsx(cr,{})})}),e.jsx(I,{children:"Primera página"})]}),e.jsxs(w,{children:[e.jsx(R,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"sm",onClick:()=>h("previous"),disabled:u.prev_page_url===null,className:"hover:bg-primary hover:text-white",children:e.jsx(tr,{})})}),e.jsx(I,{children:"Página anterior"})]}),e.jsx(mr,{className:"hidden sm:flex mr-1",children:e.jsx(fr,{children:e.jsx(gr,{children:e.jsx(br,{children:p.current_page})})})}),e.jsxs(w,{children:[e.jsx(R,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"sm",onClick:()=>h("next"),disabled:u.next_page_url===null,className:"hover:bg-primary hover:text-white",children:e.jsx(ir,{})})}),e.jsx(I,{children:"Siguiente página"})]}),e.jsxs(w,{children:[e.jsx(R,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"sm",onClick:()=>h("last"),disabled:u.next_page_url===null,className:"hover:bg-primary hover:text-white hidden sm:block",children:e.jsx(ur,{})})}),e.jsx(I,{children:"Última página"})]})]})})]})}te.defaults.withCredentials=!0;te.defaults.withXSRFToken=!0;function Wr(){const{fetchEstudiantes:n,estudiantes:o,pagination:a,pageNumRefs:t,query:s,per_page:i}=le();return m.useEffect(()=>{n(a,s,i)},[a,s,i]),e.jsx("div",{className:"container mx-auto px-6 py-4 lg:px-8 min-h-[68vh]",children:e.jsx(zr,{columns:hr(Number(t.from)),data:o??[]})})}export{Wr as default};
