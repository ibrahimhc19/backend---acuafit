import{j as e,S as we,c as _,b as Re,L as Ie,d as Pe,e as oe,r as h,P,f as ae,g as ke,R as f,h as Se,B as y,t as Z,F as Te,i as te}from"./index-D8nihatK.js";import{u as De,P as Oe,D as Le,a as Me,b as $e,c as He,d as Ve,e as ze,T as Ee,f as Fe,g as F,h as Ke,i as ee,j as Be,k as re,l as qe}from"./dialog-B7yiUbwn.js";import{T as w,a as R,b as I}from"./tooltip-C8P7seRL.js";import{I as Ge}from"./input-kZQ0hj-d.js";import{c as Ue,u as Qe,C as Xe,S as Ye,a as Je,b as We,d as Ze,e as er,f as rr,g as nr}from"./select-ByX7m_-a.js";import{u as B,a as se,c as ie,P as or}from"./react-Do2HcfbW.js";import{t as ne}from"./timeFormatter-DNfpeksr.js";import{u as le}from"./useEstudiantesStore-DbujZyQE.js";import{c as O}from"./createLucideIcon-D5mj-7k7.js";import"./index-ChBFLR9v.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],tr=O("chevron-left",ar);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ir=O("chevron-right",sr);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],cr=O("chevrons-left",lr);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],ur=O("chevrons-right",dr),xr=Re("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function pr({className:n,variant:o,asChild:a=!1,...s}){const i=a?we:"span";return e.jsx(i,{"data-slot":"badge",className:_(xr({variant:o}),n),...s})}const hr=n=>[{accessorKey:"id",header:"#",cell:({row:o})=>o.index+n},{id:"acudiente",cell:({row:o})=>o.original.acudiente_id?e.jsx(pr,{className:"h-5 min-w-5 rounded-full px-1 font-mono tabular-nums",variant:"secondary",asChild:!0,children:e.jsx(Ie,{to:"#",children:"A"})}):null},{id:"nombresCompletos",accessorFn:o=>`${o.nombres} ${o.apellidos}`,header:"Nombres completos"},{accessorKey:"edad",header:"Edad"},{accessorKey:"correo",header:"Correo electrónico"},{accessorKey:"telefono",header:"Teléfono"},{accessorKey:"sede.nombre",header:"Sede"},{id:"horario",header:"Horario",accessorFn:o=>`${o.horario.dia_semana}`}];function mr({className:n,...o}){return e.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:_("mx-auto flex w-full justify-center",n),...o})}function fr({className:n,...o}){return e.jsx("ul",{"data-slot":"pagination-content",className:_("flex flex-row items-center gap-1",n),...o})}function gr({...n}){return e.jsx("li",{"data-slot":"pagination-item",...n})}function br({className:n,isActive:o,size:a="icon",...s}){return e.jsx("a",{"aria-current":o?"page":void 0,"data-slot":"pagination-link","data-active":o,className:_(Pe({variant:o?"outline":"ghost",size:a}),n),...s})}var L="Collapsible",[vr,ce]=oe(L),[jr,q]=vr(L),de=h.forwardRef((n,o)=>{const{__scopeCollapsible:a,open:s,defaultOpen:i,disabled:l,onOpenChange:c,...d}=n,[u,r]=B({prop:s,defaultProp:i??!1,onChange:c,caller:L});return e.jsx(jr,{scope:a,disabled:l,contentId:se(),open:u,onOpenToggle:h.useCallback(()=>r(m=>!m),[r]),children:e.jsx(P.div,{"data-state":U(u),"data-disabled":l?"":void 0,...d,ref:o})})});de.displayName=L;var ue="CollapsibleTrigger",xe=h.forwardRef((n,o)=>{const{__scopeCollapsible:a,...s}=n,i=q(ue,a);return e.jsx(P.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":U(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...s,ref:o,onClick:ie(n.onClick,i.onOpenToggle)})});xe.displayName=ue;var G="CollapsibleContent",pe=h.forwardRef((n,o)=>{const{forceMount:a,...s}=n,i=q(G,n.__scopeCollapsible);return e.jsx(or,{present:a||i.open,children:({present:l})=>e.jsx(Cr,{...s,ref:o,present:l})})});pe.displayName=G;var Cr=h.forwardRef((n,o)=>{const{__scopeCollapsible:a,present:s,children:i,...l}=n,c=q(G,a),[d,u]=h.useState(s),r=h.useRef(null),m=ae(o,r),p=h.useRef(0),g=p.current,j=h.useRef(0),A=j.current,C=c.open||d,N=h.useRef(C),v=h.useRef(void 0);return h.useEffect(()=>{const t=requestAnimationFrame(()=>N.current=!1);return()=>cancelAnimationFrame(t)},[]),ke(()=>{const t=r.current;if(t){v.current=v.current||{transitionDuration:t.style.transitionDuration,animationName:t.style.animationName},t.style.transitionDuration="0s",t.style.animationName="none";const x=t.getBoundingClientRect();p.current=x.height,j.current=x.width,N.current||(t.style.transitionDuration=v.current.transitionDuration,t.style.animationName=v.current.animationName),u(s)}},[c.open,s]),e.jsx(P.div,{"data-state":U(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!C,...l,ref:m,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":A?`${A}px`:void 0,...n.style},children:C&&i})});function U(n){return n?"open":"closed"}var Nr=de,yr=xe,Ar=pe,b="Accordion",_r=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Q,wr,Rr]=Ue(b),[M,Jr]=oe(b,[Rr,ce]),X=ce(),he=f.forwardRef((n,o)=>{const{type:a,...s}=n,i=s,l=s;return e.jsx(Q.Provider,{scope:n.__scopeAccordion,children:a==="multiple"?e.jsx(Sr,{...l,ref:o}):e.jsx(kr,{...i,ref:o})})});he.displayName=b;var[me,Ir]=M(b),[fe,Pr]=M(b,{collapsible:!1}),kr=f.forwardRef((n,o)=>{const{value:a,defaultValue:s,onValueChange:i=()=>{},collapsible:l=!1,...c}=n,[d,u]=B({prop:a,defaultProp:s??"",onChange:i,caller:b});return e.jsx(me,{scope:n.__scopeAccordion,value:f.useMemo(()=>d?[d]:[],[d]),onItemOpen:u,onItemClose:f.useCallback(()=>l&&u(""),[l,u]),children:e.jsx(fe,{scope:n.__scopeAccordion,collapsible:l,children:e.jsx(ge,{...c,ref:o})})})}),Sr=f.forwardRef((n,o)=>{const{value:a,defaultValue:s,onValueChange:i=()=>{},...l}=n,[c,d]=B({prop:a,defaultProp:s??[],onChange:i,caller:b}),u=f.useCallback(m=>d((p=[])=>[...p,m]),[d]),r=f.useCallback(m=>d((p=[])=>p.filter(g=>g!==m)),[d]);return e.jsx(me,{scope:n.__scopeAccordion,value:c,onItemOpen:u,onItemClose:r,children:e.jsx(fe,{scope:n.__scopeAccordion,collapsible:!0,children:e.jsx(ge,{...l,ref:o})})})}),[Tr,$]=M(b),ge=f.forwardRef((n,o)=>{const{__scopeAccordion:a,disabled:s,dir:i,orientation:l="vertical",...c}=n,d=f.useRef(null),u=ae(d,o),r=wr(a),p=Qe(i)==="ltr",g=ie(n.onKeyDown,j=>{var J;if(!_r.includes(j.key))return;const A=j.target,C=r().filter(E=>{var W;return!((W=E.ref.current)!=null&&W.disabled)}),N=C.findIndex(E=>E.ref.current===A),v=C.length;if(N===-1)return;j.preventDefault();let t=N;const x=0,H=v-1,V=()=>{t=N+1,t>H&&(t=x)},z=()=>{t=N-1,t<x&&(t=H)};switch(j.key){case"Home":t=x;break;case"End":t=H;break;case"ArrowRight":l==="horizontal"&&(p?V():z());break;case"ArrowDown":l==="vertical"&&V();break;case"ArrowLeft":l==="horizontal"&&(p?z():V());break;case"ArrowUp":l==="vertical"&&z();break}const _e=t%v;(J=C[_e].ref.current)==null||J.focus()});return e.jsx(Tr,{scope:a,disabled:s,direction:i,orientation:l,children:e.jsx(Q.Slot,{scope:a,children:e.jsx(P.div,{...c,"data-orientation":l,ref:u,onKeyDown:s?void 0:g})})})}),D="AccordionItem",[Dr,Y]=M(D),be=f.forwardRef((n,o)=>{const{__scopeAccordion:a,value:s,...i}=n,l=$(D,a),c=Ir(D,a),d=X(a),u=se(),r=s&&c.value.includes(s)||!1,m=l.disabled||n.disabled;return e.jsx(Dr,{scope:a,open:r,disabled:m,triggerId:u,children:e.jsx(Nr,{"data-orientation":l.orientation,"data-state":Ae(r),...d,...i,ref:o,disabled:m,open:r,onOpenChange:p=>{p?c.onItemOpen(s):c.onItemClose(s)}})})});be.displayName=D;var ve="AccordionHeader",je=f.forwardRef((n,o)=>{const{__scopeAccordion:a,...s}=n,i=$(b,a),l=Y(ve,a);return e.jsx(P.h3,{"data-orientation":i.orientation,"data-state":Ae(l.open),"data-disabled":l.disabled?"":void 0,...s,ref:o})});je.displayName=ve;var K="AccordionTrigger",Ce=f.forwardRef((n,o)=>{const{__scopeAccordion:a,...s}=n,i=$(b,a),l=Y(K,a),c=Pr(K,a),d=X(a);return e.jsx(Q.ItemSlot,{scope:a,children:e.jsx(yr,{"aria-disabled":l.open&&!c.collapsible||void 0,"data-orientation":i.orientation,id:l.triggerId,...d,...s,ref:o})})});Ce.displayName=K;var Ne="AccordionContent",ye=f.forwardRef((n,o)=>{const{__scopeAccordion:a,...s}=n,i=$(b,a),l=Y(Ne,a),c=X(a);return e.jsx(Ar,{role:"region","aria-labelledby":l.triggerId,"data-orientation":i.orientation,...c,...s,ref:o,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});ye.displayName=Ne;function Ae(n){return n?"open":"closed"}var Or=he,Lr=be,Mr=je,$r=Ce,Hr=ye;function Vr({...n}){return e.jsx(Or,{"data-slot":"accordion",...n})}function k({className:n,...o}){return e.jsx(Lr,{"data-slot":"accordion-item",className:_("border-b last:border-b-0",n),...o})}function S({className:n,children:o,...a}){return e.jsx(Mr,{className:"flex",children:e.jsxs($r,{"data-slot":"accordion-trigger",className:_("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-2 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",n),...a,children:[o,e.jsx(Xe,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function T({className:n,children:o,...a}){return e.jsx(Hr,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...a,children:e.jsx("div",{className:_("pt-0 pb-4",n),children:o})})}function zr({columns:n,data:o}){var v;const a=De({data:o,columns:n,getCoreRowModel:qe(),manualPagination:!0}),[s,i]=h.useState(!1),[l,c]=h.useState(),d=Se(),{selectEstudiante:u,selectedEstudiante:r,pageNumRefs:m,pageLinks:p,handlePageChange:g,query:j,setQuery:A,setPerPage:C,deleteEstudiante:N}=le();return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"scroll-m-20 flex-wrap text-3xl font-semibold text-primary",children:"Listado de Estudiantes"}),e.jsxs("div",{className:"flex w-full justify-between my-4 gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ge,{type:"search",placeholder:"Buscar",value:j,onChange:t=>A(t.target.value)}),e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(y,{variant:"outline",className:"hover:bg-primary hover:text-white",onClick:()=>A(""),children:"Limpiar"})}),e.jsx(I,{children:"Limpia la barra de búsqueda"})]})]}),e.jsxs(w,{children:[e.jsx(R,{asChild:!0,children:e.jsx(y,{variant:"outline",size:"sm",className:"hover:bg-primary hover:text-white flex justify-self-end h-9 cursor-pointer",onClick:()=>{u(null),d("/registro",{replace:!0})},children:e.jsx(Oe,{})})}),e.jsx(I,{children:e.jsx("p",{children:"Crea un nuevo registro"})})]})]}),s&&r&&e.jsx(Le,{open:s,onOpenChange:t=>{i(t)},children:e.jsxs(Me,{children:[e.jsx($e,{children:e.jsx(He,{className:"text-2xl text-left"})}),e.jsxs(Vr,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(k,{value:"item-1",children:[e.jsx(S,{className:"font-bold text-[16px]",children:"Detalles del Estudiante"}),e.jsxs(T,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombre completo:"})," ",r.nombres," ",r.apellidos]}),e.jsxs("p",{children:[e.jsx("b",{children:"Edad:"})," ",r.edad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Documento:"})," ",r.tipo_documento," ",r.documento_identidad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo:"})," ",r.correo]}),e.jsxs("p",{children:[e.jsx("b",{children:"Teléfono:"})," ",r.telefono]}),e.jsxs("p",{children:[e.jsx("b",{children:"Dirección:"})," ",r.direccion]}),e.jsxs("p",{children:[e.jsx("b",{children:"RUT:"})," ",r.rut??"N/A"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Acepta el reglamento:"})," ",r.acepta_reglamento?"Sí":"No"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Autoriza uso de imagen:"})," ",r.autoriza_uso_imagen?"Sí":"No"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Observaciones:"})," ",r.observaciones??"N/A"]})]})]}),r.acudiente&&e.jsxs(k,{value:"item-2",children:[e.jsx(S,{className:"font-bold text-[16px]",children:"Detalle del Acudiente"}),e.jsxs(T,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombres:"})," ",r==null?void 0:r.acudiente.nombres," ",r==null?void 0:r.acudiente.apellidos]}),e.jsxs("p",{children:[e.jsx("b",{children:"Documento:"})," ",r==null?void 0:r.acudiente.tipo_documento," ",r==null?void 0:r.acudiente.documento_identidad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Teléfono:"})," ",r==null?void 0:r.acudiente.telefono]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo:"})," ",r==null?void 0:r.acudiente.email]})]})]}),e.jsxs(k,{value:"item-3",children:[e.jsx(S,{className:"font-bold text-[16px]",children:"Detalles de la Sede"}),e.jsxs(T,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombre:"})," ",r==null?void 0:r.sede.nombre]}),e.jsxs("p",{children:[e.jsx("b",{children:"Dirección:"})," ",(r==null?void 0:r.sede.direccion)??"N/A"]})]})]}),e.jsxs(k,{value:"item-4",children:[e.jsx(S,{className:"font-bold text-[16px]",children:"Detalles del Horario"}),e.jsxs(T,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Día de la semana:"})," ",r==null?void 0:r.horario.dia_semana]}),e.jsxs("p",{children:[e.jsx("b",{children:"Hora de inicio:"})," ",ne(r==null?void 0:r.horario.hora_inicio)]}),e.jsxs("p",{children:[e.jsx("b",{children:"Hora de fin:"})," ",ne(r==null?void 0:r.horario.hora_fin)]})]})]})]}),e.jsxs(Ve,{children:[e.jsx(ze,{asChild:!0,children:e.jsx(y,{variant:"outline",children:"Cancelar"})}),e.jsx(y,{onClick:()=>{const t=r==null?void 0:r.id;u(null),d(`/registro/${t}`,{replace:!0})},children:"Editar"}),e.jsx(y,{variant:"destructive",type:"submit",onClick:async()=>{if(r!=null&&r.id)try{await N(r.id),Z.success("El estudiante fue eliminado correctamente."),u(null),i(!1)}catch(t){Z.error("No se pudo eliminar el estudiante. Intenta de nuevo."),console.error("Error al eliminar",t)}},disabled:!0,children:"Eliminar"})]})]})}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Ee,{children:[e.jsx(Fe,{children:a.getHeaderGroups().map(t=>e.jsx(F,{children:t.headers.map(x=>e.jsx(Ke,{children:x.isPlaceholder?null:ee(x.column.columnDef.header,x.getContext())},x.id))},t.id))}),e.jsx(Be,{className:"text-gray-600",children:(v=a.getRowModel().rows)!=null&&v.length?a.getRowModel().rows.map(t=>e.jsx(F,{onClick:()=>{u(t.original),i(!0)},className:"hover:text-muted hover:bg-primary cursor-pointer",children:t.getVisibleCells().map(x=>e.jsx(re,{className:"py-0.5",children:ee(x.column.columnDef.cell,x.getContext())},x.id))},t.id)):e.jsx(F,{children:e.jsx(re,{colSpan:n.length,className:"h-8 text-center",children:"No hay resultados"})})})]})}),e.jsx("div",{className:"flex flex-row justify-end items-center mb-4 sm:mb-0",children:e.jsxs("div",{className:"flex items-center justify-end py-4 space-x-1",children:[e.jsxs(Ye,{defaultValue:"10",onValueChange:t=>C(Number(t)),children:[e.jsx(Je,{children:e.jsx(We,{placeholder:"Cantidad"})}),e.jsx(Ze,{children:e.jsxs(er,{children:[e.jsx(rr,{children:"Filas"}),Te.map((t,x)=>e.jsx(nr,{value:t.value.toString(),children:t.label},x))]})})]}),e.jsxs(w,{children:[e.jsx(R,{asChild:!0,children:e.jsx(y,{variant:"outline",size:"sm",onClick:()=>g("first"),disabled:p.prev_page_url===null,className:"hover:bg-primary hover:text-white hidden sm:block",children:e.jsx(cr,{})})}),e.jsx(I,{children:"Primera página"})]}),e.jsxs(w,{children:[e.jsx(R,{asChild:!0,children:e.jsx(y,{variant:"outline",size:"sm",onClick:()=>g("previous"),disabled:p.prev_page_url===null,className:"hover:bg-primary hover:text-white",children:e.jsx(tr,{})})}),e.jsx(I,{children:"Página anterior"})]}),e.jsx(mr,{className:"hidden sm:flex mr-1",children:e.jsx(fr,{children:e.jsx(gr,{children:e.jsx(br,{children:m.current_page})})})}),e.jsxs(w,{children:[e.jsx(R,{asChild:!0,children:e.jsx(y,{variant:"outline",size:"sm",onClick:()=>g("next"),disabled:p.next_page_url===null,className:"hover:bg-primary hover:text-white",children:e.jsx(ir,{})})}),e.jsx(I,{children:"Siguiente página"})]}),e.jsxs(w,{children:[e.jsx(R,{asChild:!0,children:e.jsx(y,{variant:"outline",size:"sm",onClick:()=>g("last"),disabled:p.next_page_url===null,className:"hover:bg-primary hover:text-white hidden sm:block",children:e.jsx(ur,{})})}),e.jsx(I,{children:"Última página"})]})]})})]})}te.defaults.withCredentials=!0;te.defaults.withXSRFToken=!0;function Wr(){const{fetchEstudiantes:n,estudiantes:o,pagination:a,pageNumRefs:s,query:i,per_page:l}=le();return h.useEffect(()=>{n(a,i,l)},[a,i,l]),e.jsx("div",{className:"container mx-auto px-6 py-4 lg:px-8 min-h-[68vh]",children:e.jsx(zr,{columns:hr(Number(s.from)),data:o??[]})})}export{Wr as default};
