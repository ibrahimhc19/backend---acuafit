import{c as E,j as e,S as _e,a as R,d as Ie,L as Re,e as Pe,f as ne,r as f,P as D,g as ae,h as ke,R as g,i as Se,B as A,t as I,F as De,k as te}from"./index-B6Pfli54.js";import{u as Te,P as Oe,D as Le,a as Me,b as Ee,c as $e,d as He,e as Ve,T as ze,f as Fe,g as K,h as Ke,i as ee,j as Be,k as re,l as qe}from"./dialog-Bvdgjq44.js";import{T as P,a as k,b as S}from"./tooltip-jKFFTCY1.js";import{I as Ge}from"./input-CvjoZMAX.js";import{c as Ue,u as Qe,C as Xe,S as Ye,a as Je,b as We,d as Ze,e as er,f as rr,g as or}from"./select-BOpiJw6T.js";import{u as q,a as se,c as ie,P as nr}from"./react-C20NM8gs.js";import{t as oe}from"./timeFormatter-DNfpeksr.js";import{u as le}from"./useEstudiantesStore-B7SAnBMT.js";import"./index-BbGv7Wcj.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],tr=E("chevron-left",ar);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ir=E("chevron-right",sr);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],cr=E("chevrons-left",lr);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],ur=E("chevrons-right",dr),pr=Ie("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function xr({className:o,variant:n,asChild:a=!1,...t}){const s=a?_e:"span";return e.jsx(s,{"data-slot":"badge",className:R(pr({variant:n}),o),...t})}const hr=o=>[{accessorKey:"id",header:"#",cell:({row:n})=>n.index+o},{id:"acudiente",cell:({row:n})=>n.original.acudiente_id?e.jsx(xr,{className:"h-5 min-w-5 rounded-full px-1 font-mono tabular-nums",variant:"secondary",asChild:!0,children:e.jsx(Re,{to:"#",children:"A"})}):null},{id:"nombresCompletos",accessorFn:n=>`${n.nombres} ${n.apellidos}`,header:"Nombres completos"},{accessorKey:"edad",header:"Edad"},{accessorKey:"correo",header:"Correo electrónico"},{accessorKey:"telefono",header:"Teléfono"},{accessorKey:"sede.nombre",header:"Sede"},{id:"horario",header:"Horario",accessorFn:n=>`${n.horario.dia_semana}`}];function mr({className:o,...n}){return e.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:R("mx-auto flex w-full justify-center",o),...n})}function fr({className:o,...n}){return e.jsx("ul",{"data-slot":"pagination-content",className:R("flex flex-row items-center gap-1",o),...n})}function gr({...o}){return e.jsx("li",{"data-slot":"pagination-item",...o})}function br({className:o,isActive:n,size:a="icon",...t}){return e.jsx("a",{"aria-current":n?"page":void 0,"data-slot":"pagination-link","data-active":n,className:R(Pe({variant:n?"outline":"ghost",size:a}),o),...t})}var $="Collapsible",[vr,ce]=ne($),[jr,G]=vr($),de=f.forwardRef((o,n)=>{const{__scopeCollapsible:a,open:t,defaultOpen:s,disabled:i,onOpenChange:d,...u}=o,[c,x]=q({prop:t,defaultProp:s??!1,onChange:d,caller:$});return e.jsx(jr,{scope:a,disabled:i,contentId:se(),open:c,onOpenToggle:f.useCallback(()=>x(h=>!h),[x]),children:e.jsx(D.div,{"data-state":Q(c),"data-disabled":i?"":void 0,...u,ref:n})})});de.displayName=$;var ue="CollapsibleTrigger",pe=f.forwardRef((o,n)=>{const{__scopeCollapsible:a,...t}=o,s=G(ue,a);return e.jsx(D.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Q(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...t,ref:n,onClick:ie(o.onClick,s.onOpenToggle)})});pe.displayName=ue;var U="CollapsibleContent",xe=f.forwardRef((o,n)=>{const{forceMount:a,...t}=o,s=G(U,o.__scopeCollapsible);return e.jsx(nr,{present:a||s.open,children:({present:i})=>e.jsx(Cr,{...t,ref:n,present:i})})});xe.displayName=U;var Cr=f.forwardRef((o,n)=>{const{__scopeCollapsible:a,present:t,children:s,...i}=o,d=G(U,a),[u,c]=f.useState(t),x=f.useRef(null),h=ae(n,x),r=f.useRef(0),_=r.current,b=f.useRef(0),C=b.current,y=d.open||u,j=f.useRef(y),N=f.useRef(void 0);return f.useEffect(()=>{const p=requestAnimationFrame(()=>j.current=!1);return()=>cancelAnimationFrame(p)},[]),ke(()=>{const p=x.current;if(p){N.current=N.current||{transitionDuration:p.style.transitionDuration,animationName:p.style.animationName},p.style.transitionDuration="0s",p.style.animationName="none";const w=p.getBoundingClientRect();r.current=w.height,b.current=w.width,j.current||(p.style.transitionDuration=N.current.transitionDuration,p.style.animationName=N.current.animationName),c(t)}},[d.open,t]),e.jsx(D.div,{"data-state":Q(d.open),"data-disabled":d.disabled?"":void 0,id:d.contentId,hidden:!y,...i,ref:h,style:{"--radix-collapsible-content-height":_?`${_}px`:void 0,"--radix-collapsible-content-width":C?`${C}px`:void 0,...o.style},children:y&&s})});function Q(o){return o?"open":"closed"}var yr=de,Nr=pe,wr=xe,v="Accordion",Ar=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[X,_r,Ir]=Ue(v),[H,Yr]=ne(v,[Ir,ce]),Y=ce(),he=g.forwardRef((o,n)=>{const{type:a,...t}=o,s=t,i=t;return e.jsx(X.Provider,{scope:o.__scopeAccordion,children:a==="multiple"?e.jsx(Sr,{...i,ref:n}):e.jsx(kr,{...s,ref:n})})});he.displayName=v;var[me,Rr]=H(v),[fe,Pr]=H(v,{collapsible:!1}),kr=g.forwardRef((o,n)=>{const{value:a,defaultValue:t,onValueChange:s=()=>{},collapsible:i=!1,...d}=o,[u,c]=q({prop:a,defaultProp:t??"",onChange:s,caller:v});return e.jsx(me,{scope:o.__scopeAccordion,value:g.useMemo(()=>u?[u]:[],[u]),onItemOpen:c,onItemClose:g.useCallback(()=>i&&c(""),[i,c]),children:e.jsx(fe,{scope:o.__scopeAccordion,collapsible:i,children:e.jsx(ge,{...d,ref:n})})})}),Sr=g.forwardRef((o,n)=>{const{value:a,defaultValue:t,onValueChange:s=()=>{},...i}=o,[d,u]=q({prop:a,defaultProp:t??[],onChange:s,caller:v}),c=g.useCallback(h=>u((r=[])=>[...r,h]),[u]),x=g.useCallback(h=>u((r=[])=>r.filter(_=>_!==h)),[u]);return e.jsx(me,{scope:o.__scopeAccordion,value:d,onItemOpen:c,onItemClose:x,children:e.jsx(fe,{scope:o.__scopeAccordion,collapsible:!0,children:e.jsx(ge,{...i,ref:n})})})}),[Dr,V]=H(v),ge=g.forwardRef((o,n)=>{const{__scopeAccordion:a,disabled:t,dir:s,orientation:i="vertical",...d}=o,u=g.useRef(null),c=ae(u,n),x=_r(a),r=Qe(s)==="ltr",_=ie(o.onKeyDown,b=>{var W;if(!Ar.includes(b.key))return;const C=b.target,y=x().filter(F=>{var Z;return!((Z=F.ref.current)!=null&&Z.disabled)}),j=y.findIndex(F=>F.ref.current===C),N=y.length;if(j===-1)return;b.preventDefault();let p=j;const w=0,l=N-1,m=()=>{p=j+1,p>l&&(p=w)},z=()=>{p=j-1,p<w&&(p=l)};switch(b.key){case"Home":p=w;break;case"End":p=l;break;case"ArrowRight":i==="horizontal"&&(r?m():z());break;case"ArrowDown":i==="vertical"&&m();break;case"ArrowLeft":i==="horizontal"&&(r?z():m());break;case"ArrowUp":i==="vertical"&&z();break}const Ae=p%N;(W=y[Ae].ref.current)==null||W.focus()});return e.jsx(Dr,{scope:a,disabled:t,direction:s,orientation:i,children:e.jsx(X.Slot,{scope:a,children:e.jsx(D.div,{...d,"data-orientation":i,ref:c,onKeyDown:t?void 0:_})})})}),M="AccordionItem",[Tr,J]=H(M),be=g.forwardRef((o,n)=>{const{__scopeAccordion:a,value:t,...s}=o,i=V(M,a),d=Rr(M,a),u=Y(a),c=se(),x=t&&d.value.includes(t)||!1,h=i.disabled||o.disabled;return e.jsx(Tr,{scope:a,open:x,disabled:h,triggerId:c,children:e.jsx(yr,{"data-orientation":i.orientation,"data-state":we(x),...u,...s,ref:n,disabled:h,open:x,onOpenChange:r=>{r?d.onItemOpen(t):d.onItemClose(t)}})})});be.displayName=M;var ve="AccordionHeader",je=g.forwardRef((o,n)=>{const{__scopeAccordion:a,...t}=o,s=V(v,a),i=J(ve,a);return e.jsx(D.h3,{"data-orientation":s.orientation,"data-state":we(i.open),"data-disabled":i.disabled?"":void 0,...t,ref:n})});je.displayName=ve;var B="AccordionTrigger",Ce=g.forwardRef((o,n)=>{const{__scopeAccordion:a,...t}=o,s=V(v,a),i=J(B,a),d=Pr(B,a),u=Y(a);return e.jsx(X.ItemSlot,{scope:a,children:e.jsx(Nr,{"aria-disabled":i.open&&!d.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...u,...t,ref:n})})});Ce.displayName=B;var ye="AccordionContent",Ne=g.forwardRef((o,n)=>{const{__scopeAccordion:a,...t}=o,s=V(v,a),i=J(ye,a),d=Y(a);return e.jsx(wr,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...d,...t,ref:n,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...o.style}})});Ne.displayName=ye;function we(o){return o?"open":"closed"}var Or=he,Lr=be,Mr=je,Er=Ce,$r=Ne;function Hr({...o}){return e.jsx(Or,{"data-slot":"accordion",...o})}function T({className:o,...n}){return e.jsx(Lr,{"data-slot":"accordion-item",className:R("border-b last:border-b-0",o),...n})}function O({className:o,children:n,...a}){return e.jsx(Mr,{className:"flex",children:e.jsxs(Er,{"data-slot":"accordion-trigger",className:R("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-2 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",o),...a,children:[n,e.jsx(Xe,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function L({className:o,children:n,...a}){return e.jsx($r,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...a,children:e.jsx("div",{className:R("pt-0 pb-4",o),children:n})})}function Vr({columns:o,data:n}){var w;const a=Te({data:n,columns:o,getCoreRowModel:qe(),manualPagination:!0}),[t,s]=f.useState(!1),[i,d]=f.useState(!1),[u,c]=f.useState(!1),x=Se(),{selectEstudiante:h,selectedEstudiante:r,pageNumRefs:_,pageLinks:b,handlePageChange:C,query:y,setQuery:j,setPerPage:N,deleteEstudiante:p}=le();return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"scroll-m-20 flex-wrap text-3xl font-semibold text-primary",children:"Listado de Estudiantes"}),e.jsxs("div",{className:"flex w-full justify-between my-4 gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ge,{type:"search",placeholder:"Buscar",value:y,onChange:l=>j(l.target.value)}),e.jsxs(P,{children:[e.jsx(k,{asChild:!0,children:e.jsx(A,{variant:"outline",className:"hover:bg-primary hover:text-white",onClick:()=>j(""),children:"Limpiar"})}),e.jsx(S,{children:"Limpia la barra de búsqueda"})]})]}),e.jsxs(P,{children:[e.jsx(k,{asChild:!0,children:e.jsx(A,{variant:"outline",size:"sm",className:"hover:bg-primary hover:text-white flex justify-self-end h-9 cursor-pointer",onClick:()=>{h(null),x("/registro",{replace:!0})},children:e.jsx(Oe,{})})}),e.jsx(S,{children:e.jsx("p",{children:"Crea un nuevo registro"})})]})]}),t&&r&&e.jsx(Le,{open:t,onOpenChange:l=>{s(l)},children:e.jsxs(Me,{children:[e.jsx(Ee,{children:e.jsx($e,{className:"text-2xl text-left"})}),e.jsxs(Hr,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(T,{value:"item-1",children:[e.jsx(O,{className:"font-bold text-[16px]",children:"Detalles del Estudiante"}),e.jsxs(L,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombre completo:"})," ",r.nombres," ",r.apellidos]}),e.jsxs("p",{children:[e.jsx("b",{children:"Edad:"})," ",r.edad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Documento:"})," ",r.tipo_documento," ",r.documento_identidad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo:"})," ",r.correo]}),e.jsxs("p",{children:[e.jsx("b",{children:"Teléfono:"})," ",r.telefono]}),e.jsxs("p",{children:[e.jsx("b",{children:"Dirección:"})," ",r.direccion]}),e.jsxs("p",{children:[e.jsx("b",{children:"RUT:"})," ",r.rut??"N/A"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Acepta el reglamento:"})," ",r.acepta_reglamento?"Sí":"No"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Autoriza uso de imagen:"})," ",r.autoriza_uso_imagen?"Sí":"No"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Observaciones:"})," ",r.observaciones??"N/A"]})]})]}),r.acudiente&&e.jsxs(T,{value:"item-2",children:[e.jsx(O,{className:"font-bold text-[16px]",children:"Detalle del Acudiente"}),e.jsxs(L,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombres:"})," ",r==null?void 0:r.acudiente.nombres," ",r==null?void 0:r.acudiente.apellidos]}),e.jsxs("p",{children:[e.jsx("b",{children:"Documento:"})," ",r==null?void 0:r.acudiente.tipo_documento," ",r==null?void 0:r.acudiente.documento_identidad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Teléfono:"})," ",r==null?void 0:r.acudiente.telefono]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo:"})," ",r==null?void 0:r.acudiente.email]})]})]}),e.jsxs(T,{value:"item-3",children:[e.jsx(O,{className:"font-bold text-[16px]",children:"Detalles de la Sede"}),e.jsxs(L,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombre:"})," ",r==null?void 0:r.sede.nombre]}),e.jsxs("p",{children:[e.jsx("b",{children:"Dirección:"})," ",(r==null?void 0:r.sede.direccion)??"N/A"]})]})]}),e.jsxs(T,{value:"item-4",children:[e.jsx(O,{className:"font-bold text-[16px]",children:"Detalles del Horario"}),e.jsxs(L,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Día de la semana:"})," ",r==null?void 0:r.horario.dia_semana]}),e.jsxs("p",{children:[e.jsx("b",{children:"Hora de inicio:"})," ",oe(r==null?void 0:r.horario.hora_inicio)]}),e.jsxs("p",{children:[e.jsx("b",{children:"Hora de fin:"})," ",oe(r==null?void 0:r.horario.hora_fin)]})]})]})]}),e.jsxs(He,{children:[e.jsx(Ve,{asChild:!0,children:e.jsx(A,{variant:"outline",children:"Cancelar"})}),e.jsx(A,{onClick:()=>{const l=r==null?void 0:r.id;h(null),x(`/registro/${l}`,{replace:!0})},children:"Editar"}),e.jsx(A,{disabled:i,variant:"destructive",type:"submit",onClick:async()=>{if(r!=null&&r.id){d(!0);try{await p(r.id),I.success("El estudiante fue eliminado correctamente."),h(null),s(!1)}catch(l){I.error("No se pudo eliminar el estudiante. Intenta de nuevo."),console.error("Error al eliminar",l)}finally{d(!1)}}},children:i?"Eliminando":"Eliminar"})]})]})}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(ze,{children:[e.jsx(Fe,{children:a.getHeaderGroups().map(l=>e.jsx(K,{children:l.headers.map(m=>e.jsx(Ke,{children:m.isPlaceholder?null:ee(m.column.columnDef.header,m.getContext())},m.id))},l.id))}),e.jsx(Be,{className:"text-gray-600",children:(w=a.getRowModel().rows)!=null&&w.length?a.getRowModel().rows.map(l=>e.jsx(K,{onClick:()=>{h(l.original),s(!0)},className:"hover:text-muted hover:bg-primary cursor-pointer",children:l.getVisibleCells().map(m=>e.jsx(re,{className:"py-0.5",children:ee(m.column.columnDef.cell,m.getContext())},m.id))},l.id)):e.jsx(K,{children:e.jsx(re,{colSpan:o.length,className:"h-8 text-center",children:"No hay resultados"})})})]})}),e.jsx("div",{className:"flex flex-row justify-end items-center mb-4 sm:mb-0",children:e.jsxs("div",{className:"flex items-center justify-end py-4 space-x-1",children:[e.jsxs(Ye,{disabled:u,defaultValue:"10",onValueChange:async l=>{c(!0);try{N(Number(l))}catch(m){console.log(m),I.error("Error al cambiar el número de filas por página")}finally{c(!1)}},children:[e.jsx(Je,{children:e.jsx(We,{placeholder:"Cantidad"})}),e.jsx(Ze,{children:e.jsxs(er,{children:[e.jsx(rr,{children:"Filas"}),De.map((l,m)=>e.jsx(or,{value:l.value.toString(),children:l.label},m))]})})]}),e.jsxs(P,{children:[e.jsx(k,{asChild:!0,children:e.jsx(A,{variant:"outline",size:"sm",onClick:async()=>{c(!0);try{await C("first")}catch(l){console.log(l),I.error("Error al cambiar de página")}finally{c(!1)}},disabled:b.prev_page_url===null||u,className:"hover:bg-primary hover:text-white hidden sm:block",children:e.jsx(cr,{})})}),e.jsx(S,{children:"Primera página"})]}),e.jsxs(P,{children:[e.jsx(k,{asChild:!0,children:e.jsx(A,{variant:"outline",size:"sm",onClick:async()=>{c(!0);try{await C("previous")}catch(l){console.log(l),I.error("Error al cambiar de página")}finally{c(!1)}},disabled:b.prev_page_url===null||u,className:"hover:bg-primary hover:text-white",children:e.jsx(tr,{})})}),e.jsx(S,{children:"Página anterior"})]}),e.jsx(mr,{className:"hidden sm:flex mr-1",children:e.jsx(fr,{children:e.jsx(gr,{children:e.jsx(br,{children:_.current_page})})})}),e.jsxs(P,{children:[e.jsx(k,{asChild:!0,children:e.jsx(A,{variant:"outline",size:"sm",onClick:async()=>{c(!0);try{await C("next")}catch(l){console.log(l),I.error("Error al cambiar de página")}finally{c(!1)}},disabled:b.next_page_url===null||u,className:"hover:bg-primary hover:text-white",children:e.jsx(ir,{})})}),e.jsx(S,{children:"Siguiente página"})]}),e.jsxs(P,{children:[e.jsx(k,{asChild:!0,children:e.jsx(A,{variant:"outline",size:"sm",onClick:async()=>{c(!0);try{await C("last")}catch(l){console.log(l),I.error("Error al cambiar de página")}finally{c(!1)}},disabled:b.next_page_url===null||u,className:"hover:bg-primary hover:text-white hidden sm:block",children:e.jsx(ur,{})})}),e.jsx(S,{children:"Última página"})]})]})})]})}te.defaults.withCredentials=!0;te.defaults.withXSRFToken=!0;function Jr(){const{fetchEstudiantes:o,estudiantes:n,pagination:a,pageNumRefs:t,query:s,per_page:i}=le();return f.useEffect(()=>{o(a,s,i)},[a,s,i]),e.jsx("div",{className:"container mx-auto px-6 py-4 lg:px-8 min-h-[68vh]",children:e.jsx(Vr,{columns:hr(Number(t.from)),data:n??[]})})}export{Jr as default};
