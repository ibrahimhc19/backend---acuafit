import{l as p}from"./index-BwDzK_OL.js";import{d as h}from"./react-Y4OFWVI8.js";const w=async(a,o,e)=>{var r,t,s,n;try{if(o&&(o==null?void 0:o.trim())!=="")return(await p.get(`client/buscar?q=${encodeURIComponent(o)}&per_page=${e}${a?`&page=${a}`:""}`)).data;{const i=new URLSearchParams;return e&&i.append("per_page",e.toString()),a&&i.append("page",a),(await p.get(`client/estudiantes?${i.toString()}`)).data}}catch(i){const c=i,l=((t=(r=c.response)==null?void 0:r.data)==null?void 0:t.message)??"Error inesperado",d=(n=(s=c.response)==null?void 0:s.data)==null?void 0:n.errors;throw{message:l,validationErrors:d}}},y=async a=>{var o,e,r,t;try{return(await p.get(`client/estudiante/${a}`)).data}catch(s){const n=s,i=((e=(o=n.response)==null?void 0:o.data)==null?void 0:e.message)??"Error inesperado",c=(t=(r=n.response)==null?void 0:r.data)==null?void 0:t.errors;throw{message:i,validationErrors:c}}},x=async a=>{var o,e,r,t;try{return(await p.post("client/estudiante",a)).data}catch(s){const n=s,i=((e=(o=n.response)==null?void 0:o.data)==null?void 0:e.message)??"Error inesperado",c=(t=(r=n.response)==null?void 0:r.data)==null?void 0:t.errors;throw{message:i,validationErrors:c}}},v=async(a,o)=>{var e,r,t,s;try{return(await p.patch(`client/estudiante/${a}`,o)).data}catch(n){const i=n,c=((r=(e=i.response)==null?void 0:e.data)==null?void 0:r.message)??"Error inesperado",l=(s=(t=i.response)==null?void 0:t.data)==null?void 0:s.errors;throw{message:c,validationErrors:l}}},$=async a=>{var o,e,r,t;try{return(await p.delete(`client/estudiante/${a}`)).data}catch(s){const n=s,i=((e=(o=n.response)==null?void 0:o.data)==null?void 0:e.message)??"Error inesperado",c=(t=(r=n.response)==null?void 0:r.data)==null?void 0:t.errors;throw{message:i,validationErrors:c}}},P=h((a,o)=>({estudiantes:[],selectedEstudiante:null,loading:!1,pagination:"",per_page:10,query:void 0,error:null,pageLinks:{first_page_url:"",last_page_url:"",next_page_url:null,prev_page_url:null},pageNumRefs:{current_page:1,last_page:1,per_page:10,from:0,to:0,total:0,next_page:null},fetchEstudiantes:async(e,r,t)=>{a({loading:!0,error:null});try{const s=await w(e,r,t),{current_page:n,last_page:i,per_page:c,from:l,to:d,total:g,next_page:u,first_page_url:_,last_page_url:E,next_page_url:m,prev_page_url:f}=s;a({pageNumRefs:{current_page:n,last_page:i,per_page:c,from:l,to:d,total:g,next_page:u}}),a({pageLinks:{first_page_url:_,last_page_url:E,next_page_url:m,prev_page_url:f}}),a({estudiantes:s.data})}catch(s){a({error:s.message||"Error al cargar estudiantes"})}finally{a({loading:!1})}},handlePageChange:async e=>{const r=o().pageLinks;function t(s){const n=s.split("=");return n.length>=4?n[3]:n[1]}switch(e){case"first":a({pagination:t(r.first_page_url)});break;case"previous":a({pagination:t(r.prev_page_url??"")});break;case"next":a({pagination:t(r.next_page_url??"")});break;case"last":a({pagination:t(r.last_page_url??"")});break}},setQuery:e=>{a({query:e})},setPerPage:e=>{a({per_page:e})},createEstudiante:async e=>{await x(e)},updateEstudiante:async(e,r)=>{await v(e,r)},deleteEstudiante:async e=>{await $(e)},getEstudianteById:async e=>await y(e),selectEstudiante:e=>{a({selectedEstudiante:e})}}));export{P as u};
