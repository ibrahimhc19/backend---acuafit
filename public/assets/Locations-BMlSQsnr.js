import{j as e,B as u,t as c,r as S,d as A}from"./index-2LiSZXBZ.js";import{u as j,A as N,a as F,b as w,c as E,d as R,e as z,f as L,g as M,h as k}from"./alert-dialog-B-GYgm1E.js";import{d as H,e as I,u as P,D as B,a as K,b as V,c as O,m as X,T as q,f as G,g as h,h as J,i as g,j as Q,k as p,l as U}from"./dialog-DMjTJuR_.js";import{t as W,F as Y,a as f,b,c as C,d as D,e as y,o as Z,s as T}from"./form-CyqIswPS.js";import{u as _}from"./index.esm-16thhunR.js";import{I as v}from"./createLucideIcon-ChwpPmIM.js";import{T as $,a as ee,b as re}from"./tooltip-CQLOvW6r.js";import{P as ae}from"./react-CfnTfrbB.js";import"./Combination-KtqryYF5.js";const se=Z({nombre:T().min(2,{message:"El nombre de la sede es obligatorio"}),direccion:T()});function oe({setIsModalOpen:s}){const{selectSede:i,selectedSede:r,createSede:d,updateSede:n,deleteSede:m}=j(),t=_({resolver:W(se),defaultValues:r||{nombre:"",direccion:"-"}}),x=async a=>{if(r!=null&&r.id)try{await n(r.id,a),c.success("La sede fue actualizada correctamente."),i(null),s(!1)}catch(o){c.error("No se pudo actualizar la sede. Intenta de nuevo."),console.error("Error al actualizar",o)}else try{await d(a),c.success("La sede fue registrada correctamente."),i(null),s(!1)}catch(o){c.error("No se pudo registrar la sede. Intenta de nuevo."),console.error("Error al registrar",o)}};return e.jsx(Y,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(x),className:"space-y-8",children:[e.jsx(f,{control:t.control,name:"nombre",render:({field:a})=>e.jsxs(b,{children:[e.jsx(C,{children:"Nombre"}),e.jsx(D,{children:e.jsx(v,{...a})}),e.jsx(y,{})]})}),e.jsx(f,{control:t.control,name:"direccion",render:({field:a})=>e.jsxs(b,{children:[e.jsx(C,{children:"Dirección"}),e.jsx(D,{children:e.jsx(v,{...a})}),e.jsx(y,{})]})}),e.jsxs(H,{children:[e.jsx(I,{asChild:!0,children:e.jsx(u,{variant:"outline",children:"Cancelar"})}),e.jsx(u,{type:"submit",children:r?"Actualizar":"Agregar"}),e.jsxs(N,{children:[e.jsx(F,{asChild:!0,children:e.jsx(u,{variant:"destructive",disabled:!r,children:"Eliminar"})}),e.jsxs(w,{children:[e.jsxs(E,{children:[e.jsx(R,{children:"¿Estás seguro?"}),e.jsx(z,{children:"Esta acción eliminará permanentemente la sede seleccionada."})]}),e.jsxs(L,{children:[e.jsx(M,{children:"Cancelar"}),e.jsx(k,{onClick:async()=>{if(r!=null&&r.id)try{await m(r.id),c.success("La sede fue eliminada correctamente."),i(null),s(!1)}catch(a){c.error("No se pudo eliminar la sede. Intenta de nuevo."),console.error("Error al eliminar",a)}},children:"Confirmar"})]})]})]})]})]})})}function le({columns:s,data:i}){var a;const r=P({data:i,columns:s,getCoreRowModel:U(),manualPagination:!0}),[d,n]=S.useState(!1),{selectedSede:m,selectSede:t}=j(),x={setIsModalOpen:n};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"scroll-m-20 flex-wrap text-3xl font-semibold text-primary mb-8",children:"Listado de Sedes"}),e.jsxs($,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(u,{variant:"outline",size:"sm",className:"hover:bg-primary hover:text-white flex justify-self-end mb-4 cursor-pointer",onClick:()=>{t(null),n(!0)},children:e.jsx(ae,{})})}),e.jsx(re,{children:e.jsx("p",{children:"Crea un nuevo registro"})})]}),e.jsxs("div",{className:"rounded-md border",children:[d&&e.jsx(B,{open:d,onOpenChange:n,children:e.jsxs(K,{children:[e.jsxs(V,{children:[e.jsx(O,{children:m?"Editar Sede":"Agregar Sede"}),e.jsx(X,{children:m?"Modifica los datos de la sede y haz clic en 'Actualizar' para guardar los cambios.":"Completa la información para registrar una nueva sede en el sistema."})]}),e.jsx(oe,{...x})]})}),e.jsxs(q,{children:[e.jsx(G,{children:r.getHeaderGroups().map(o=>e.jsx(h,{children:o.headers.map(l=>e.jsx(J,{children:l.isPlaceholder?null:g(l.column.columnDef.header,l.getContext())},l.id))},o.id))}),e.jsx(Q,{className:"text-gray-600",children:(a=r.getRowModel().rows)!=null&&a.length?r.getRowModel().rows.map(o=>e.jsx(h,{onClick:()=>{t(o.original),n(!0)},className:"hover:text-muted hover:bg-primary cursor-pointer",children:o.getVisibleCells().map(l=>e.jsx(p,{className:"py-0.5",children:g(l.column.columnDef.cell,l.getContext())},l.id))},o.id)):e.jsx(h,{children:e.jsx(p,{colSpan:s.length,className:"h-8 text-center",children:"No hay resultados"})})})]})]})]})}const ie=[{accessorKey:"id",header:"#",cell:({row:s})=>s.index+1},{accessorKey:"nombre",header:"Nombre"},{accessorKey:"direccion",header:"Dirección"}];A.defaults.withCredentials=!0;A.defaults.withXSRFToken=!0;function ge(){const{sedes:s,fetchSedes:i}=j();return S.useEffect(()=>{i()},[]),e.jsx("div",{className:"container mx-auto px-6 py-4 lg:px-8 min-h-[68vh]",children:e.jsx(le,{data:s,columns:ie})})}export{ge as default};
