import{j as e,S as _e,c as _,b as Re,L as Ie,d as Pe,e as ne,r as h,P as k,f as ae,g as ke,R as f,h as Se,B as N,t as A,F as Te,i as te}from"./index-DtzGrowr.js";import{u as De,P as Oe,D as Le,a as Me,b as Ee,c as $e,d as He,e as Ve,T as ze,f as Fe,g as K,h as Ke,i as ee,j as Be,k as re,l as qe}from"./dialog-TR0PJF71.js";import{T as R,a as I,b as P}from"./tooltip-DblAt-bz.js";import{I as Ge}from"./input-K-loUQF_.js";import{c as Ue,u as Qe,C as Xe,S as Ye,a as Je,b as We,d as Ze,e as er,f as rr,g as or}from"./select-DYyj8DCu.js";import{u as q,a as se,c as ie,P as nr}from"./react-Tnr--ska.js";import{t as oe}from"./timeFormatter-DNfpeksr.js";import{u as le}from"./useEstudiantesStore-CcHjo5gb.js";import{c as L}from"./createLucideIcon-Cmwn3rN2.js";import"./index-CLxF_axg.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],tr=L("chevron-left",ar);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ir=L("chevron-right",sr);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],cr=L("chevrons-left",lr);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],ur=L("chevrons-right",dr),pr=Re("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function xr({className:o,variant:n,asChild:a=!1,...i}){const l=a?_e:"span";return e.jsx(l,{"data-slot":"badge",className:_(pr({variant:n}),o),...i})}const hr=o=>[{accessorKey:"id",header:"#",cell:({row:n})=>n.index+o},{id:"acudiente",cell:({row:n})=>n.original.acudiente_id?e.jsx(xr,{className:"h-5 min-w-5 rounded-full px-1 font-mono tabular-nums",variant:"secondary",asChild:!0,children:e.jsx(Ie,{to:"#",children:"A"})}):null},{id:"nombresCompletos",accessorFn:n=>`${n.nombres} ${n.apellidos}`,header:"Nombres completos"},{accessorKey:"edad",header:"Edad"},{accessorKey:"correo",header:"Correo electrónico"},{accessorKey:"telefono",header:"Teléfono"},{accessorKey:"sede.nombre",header:"Sede"},{id:"horario",header:"Horario",accessorFn:n=>`${n.horario.dia_semana}`}];function mr({className:o,...n}){return e.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:_("mx-auto flex w-full justify-center",o),...n})}function fr({className:o,...n}){return e.jsx("ul",{"data-slot":"pagination-content",className:_("flex flex-row items-center gap-1",o),...n})}function gr({...o}){return e.jsx("li",{"data-slot":"pagination-item",...o})}function br({className:o,isActive:n,size:a="icon",...i}){return e.jsx("a",{"aria-current":n?"page":void 0,"data-slot":"pagination-link","data-active":n,className:_(Pe({variant:n?"outline":"ghost",size:a}),o),...i})}var M="Collapsible",[vr,ce]=ne(M),[jr,G]=vr(M),de=h.forwardRef((o,n)=>{const{__scopeCollapsible:a,open:i,defaultOpen:l,disabled:s,onOpenChange:c,...d}=o,[u,r]=q({prop:i,defaultProp:l??!1,onChange:c,caller:M});return e.jsx(jr,{scope:a,disabled:s,contentId:se(),open:u,onOpenToggle:h.useCallback(()=>r(m=>!m),[r]),children:e.jsx(k.div,{"data-state":Q(u),"data-disabled":s?"":void 0,...d,ref:n})})});de.displayName=M;var ue="CollapsibleTrigger",pe=h.forwardRef((o,n)=>{const{__scopeCollapsible:a,...i}=o,l=G(ue,a);return e.jsx(k.button,{type:"button","aria-controls":l.contentId,"aria-expanded":l.open||!1,"data-state":Q(l.open),"data-disabled":l.disabled?"":void 0,disabled:l.disabled,...i,ref:n,onClick:ie(o.onClick,l.onOpenToggle)})});pe.displayName=ue;var U="CollapsibleContent",xe=h.forwardRef((o,n)=>{const{forceMount:a,...i}=o,l=G(U,o.__scopeCollapsible);return e.jsx(nr,{present:a||l.open,children:({present:s})=>e.jsx(Cr,{...i,ref:n,present:s})})});xe.displayName=U;var Cr=h.forwardRef((o,n)=>{const{__scopeCollapsible:a,present:i,children:l,...s}=o,c=G(U,a),[d,u]=h.useState(i),r=h.useRef(null),m=ae(n,r),x=h.useRef(0),g=x.current,j=h.useRef(0),w=j.current,C=c.open||d,y=h.useRef(C),v=h.useRef(void 0);return h.useEffect(()=>{const t=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(t)},[]),ke(()=>{const t=r.current;if(t){v.current=v.current||{transitionDuration:t.style.transitionDuration,animationName:t.style.animationName},t.style.transitionDuration="0s",t.style.animationName="none";const p=t.getBoundingClientRect();x.current=p.height,j.current=p.width,y.current||(t.style.transitionDuration=v.current.transitionDuration,t.style.animationName=v.current.animationName),u(i)}},[c.open,i]),e.jsx(k.div,{"data-state":Q(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!C,...s,ref:m,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...o.style},children:C&&l})});function Q(o){return o?"open":"closed"}var yr=de,Nr=pe,wr=xe,b="Accordion",Ar=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[X,_r,Rr]=Ue(b),[E,Jr]=ne(b,[Rr,ce]),Y=ce(),he=f.forwardRef((o,n)=>{const{type:a,...i}=o,l=i,s=i;return e.jsx(X.Provider,{scope:o.__scopeAccordion,children:a==="multiple"?e.jsx(Sr,{...s,ref:n}):e.jsx(kr,{...l,ref:n})})});he.displayName=b;var[me,Ir]=E(b),[fe,Pr]=E(b,{collapsible:!1}),kr=f.forwardRef((o,n)=>{const{value:a,defaultValue:i,onValueChange:l=()=>{},collapsible:s=!1,...c}=o,[d,u]=q({prop:a,defaultProp:i??"",onChange:l,caller:b});return e.jsx(me,{scope:o.__scopeAccordion,value:f.useMemo(()=>d?[d]:[],[d]),onItemOpen:u,onItemClose:f.useCallback(()=>s&&u(""),[s,u]),children:e.jsx(fe,{scope:o.__scopeAccordion,collapsible:s,children:e.jsx(ge,{...c,ref:n})})})}),Sr=f.forwardRef((o,n)=>{const{value:a,defaultValue:i,onValueChange:l=()=>{},...s}=o,[c,d]=q({prop:a,defaultProp:i??[],onChange:l,caller:b}),u=f.useCallback(m=>d((x=[])=>[...x,m]),[d]),r=f.useCallback(m=>d((x=[])=>x.filter(g=>g!==m)),[d]);return e.jsx(me,{scope:o.__scopeAccordion,value:c,onItemOpen:u,onItemClose:r,children:e.jsx(fe,{scope:o.__scopeAccordion,collapsible:!0,children:e.jsx(ge,{...s,ref:n})})})}),[Tr,$]=E(b),ge=f.forwardRef((o,n)=>{const{__scopeAccordion:a,disabled:i,dir:l,orientation:s="vertical",...c}=o,d=f.useRef(null),u=ae(d,n),r=_r(a),x=Qe(l)==="ltr",g=ie(o.onKeyDown,j=>{var W;if(!Ar.includes(j.key))return;const w=j.target,C=r().filter(F=>{var Z;return!((Z=F.ref.current)!=null&&Z.disabled)}),y=C.findIndex(F=>F.ref.current===w),v=C.length;if(y===-1)return;j.preventDefault();let t=y;const p=0,H=v-1,V=()=>{t=y+1,t>H&&(t=p)},z=()=>{t=y-1,t<p&&(t=H)};switch(j.key){case"Home":t=p;break;case"End":t=H;break;case"ArrowRight":s==="horizontal"&&(x?V():z());break;case"ArrowDown":s==="vertical"&&V();break;case"ArrowLeft":s==="horizontal"&&(x?z():V());break;case"ArrowUp":s==="vertical"&&z();break}const Ae=t%v;(W=C[Ae].ref.current)==null||W.focus()});return e.jsx(Tr,{scope:a,disabled:i,direction:l,orientation:s,children:e.jsx(X.Slot,{scope:a,children:e.jsx(k.div,{...c,"data-orientation":s,ref:u,onKeyDown:i?void 0:g})})})}),O="AccordionItem",[Dr,J]=E(O),be=f.forwardRef((o,n)=>{const{__scopeAccordion:a,value:i,...l}=o,s=$(O,a),c=Ir(O,a),d=Y(a),u=se(),r=i&&c.value.includes(i)||!1,m=s.disabled||o.disabled;return e.jsx(Dr,{scope:a,open:r,disabled:m,triggerId:u,children:e.jsx(yr,{"data-orientation":s.orientation,"data-state":we(r),...d,...l,ref:n,disabled:m,open:r,onOpenChange:x=>{x?c.onItemOpen(i):c.onItemClose(i)}})})});be.displayName=O;var ve="AccordionHeader",je=f.forwardRef((o,n)=>{const{__scopeAccordion:a,...i}=o,l=$(b,a),s=J(ve,a);return e.jsx(k.h3,{"data-orientation":l.orientation,"data-state":we(s.open),"data-disabled":s.disabled?"":void 0,...i,ref:n})});je.displayName=ve;var B="AccordionTrigger",Ce=f.forwardRef((o,n)=>{const{__scopeAccordion:a,...i}=o,l=$(b,a),s=J(B,a),c=Pr(B,a),d=Y(a);return e.jsx(X.ItemSlot,{scope:a,children:e.jsx(Nr,{"aria-disabled":s.open&&!c.collapsible||void 0,"data-orientation":l.orientation,id:s.triggerId,...d,...i,ref:n})})});Ce.displayName=B;var ye="AccordionContent",Ne=f.forwardRef((o,n)=>{const{__scopeAccordion:a,...i}=o,l=$(b,a),s=J(ye,a),c=Y(a);return e.jsx(wr,{role:"region","aria-labelledby":s.triggerId,"data-orientation":l.orientation,...c,...i,ref:n,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...o.style}})});Ne.displayName=ye;function we(o){return o?"open":"closed"}var Or=he,Lr=be,Mr=je,Er=Ce,$r=Ne;function Hr({...o}){return e.jsx(Or,{"data-slot":"accordion",...o})}function S({className:o,...n}){return e.jsx(Lr,{"data-slot":"accordion-item",className:_("border-b last:border-b-0",o),...n})}function T({className:o,children:n,...a}){return e.jsx(Mr,{className:"flex",children:e.jsxs(Er,{"data-slot":"accordion-trigger",className:_("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-2 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",o),...a,children:[n,e.jsx(Xe,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function D({className:o,children:n,...a}){return e.jsx($r,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...a,children:e.jsx("div",{className:_("pt-0 pb-4",o),children:n})})}function Vr({columns:o,data:n}){var v;const a=De({data:n,columns:o,getCoreRowModel:qe(),manualPagination:!0}),[i,l]=h.useState(!1),[s,c]=h.useState(!1),d=Se(),{selectEstudiante:u,selectedEstudiante:r,pageNumRefs:m,pageLinks:x,handlePageChange:g,query:j,setQuery:w,setPerPage:C,deleteEstudiante:y}=le();return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"scroll-m-20 flex-wrap text-3xl font-semibold text-primary",children:"Listado de Estudiantes"}),e.jsxs("div",{className:"flex w-full justify-between my-4 gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ge,{type:"search",placeholder:"Buscar",value:j,onChange:t=>w(t.target.value)}),e.jsxs(R,{children:[e.jsx(I,{asChild:!0,children:e.jsx(N,{variant:"outline",className:"hover:bg-primary hover:text-white",onClick:()=>w(""),children:"Limpiar"})}),e.jsx(P,{children:"Limpia la barra de búsqueda"})]})]}),e.jsxs(R,{children:[e.jsx(I,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"sm",className:"hover:bg-primary hover:text-white flex justify-self-end h-9 cursor-pointer",onClick:()=>{u(null),d("/registro",{replace:!0})},children:e.jsx(Oe,{})})}),e.jsx(P,{children:e.jsx("p",{children:"Crea un nuevo registro"})})]})]}),i&&r&&e.jsx(Le,{open:i,onOpenChange:t=>{l(t)},children:e.jsxs(Me,{children:[e.jsx(Ee,{children:e.jsx($e,{className:"text-2xl text-left"})}),e.jsxs(Hr,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(S,{value:"item-1",children:[e.jsx(T,{className:"font-bold text-[16px]",children:"Detalles del Estudiante"}),e.jsxs(D,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombre completo:"})," ",r.nombres," ",r.apellidos]}),e.jsxs("p",{children:[e.jsx("b",{children:"Edad:"})," ",r.edad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Documento:"})," ",r.tipo_documento," ",r.documento_identidad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo:"})," ",r.correo]}),e.jsxs("p",{children:[e.jsx("b",{children:"Teléfono:"})," ",r.telefono]}),e.jsxs("p",{children:[e.jsx("b",{children:"Dirección:"})," ",r.direccion]}),e.jsxs("p",{children:[e.jsx("b",{children:"RUT:"})," ",r.rut??"N/A"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Acepta el reglamento:"})," ",r.acepta_reglamento?"Sí":"No"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Autoriza uso de imagen:"})," ",r.autoriza_uso_imagen?"Sí":"No"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Observaciones:"})," ",r.observaciones??"N/A"]})]})]}),r.acudiente&&e.jsxs(S,{value:"item-2",children:[e.jsx(T,{className:"font-bold text-[16px]",children:"Detalle del Acudiente"}),e.jsxs(D,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombres:"})," ",r==null?void 0:r.acudiente.nombres," ",r==null?void 0:r.acudiente.apellidos]}),e.jsxs("p",{children:[e.jsx("b",{children:"Documento:"})," ",r==null?void 0:r.acudiente.tipo_documento," ",r==null?void 0:r.acudiente.documento_identidad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Teléfono:"})," ",r==null?void 0:r.acudiente.telefono]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo:"})," ",r==null?void 0:r.acudiente.email]})]})]}),e.jsxs(S,{value:"item-3",children:[e.jsx(T,{className:"font-bold text-[16px]",children:"Detalles de la Sede"}),e.jsxs(D,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombre:"})," ",r==null?void 0:r.sede.nombre]}),e.jsxs("p",{children:[e.jsx("b",{children:"Dirección:"})," ",(r==null?void 0:r.sede.direccion)??"N/A"]})]})]}),e.jsxs(S,{value:"item-4",children:[e.jsx(T,{className:"font-bold text-[16px]",children:"Detalles del Horario"}),e.jsxs(D,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Día de la semana:"})," ",r==null?void 0:r.horario.dia_semana]}),e.jsxs("p",{children:[e.jsx("b",{children:"Hora de inicio:"})," ",oe(r==null?void 0:r.horario.hora_inicio)]}),e.jsxs("p",{children:[e.jsx("b",{children:"Hora de fin:"})," ",oe(r==null?void 0:r.horario.hora_fin)]})]})]})]}),e.jsxs(He,{children:[e.jsx(Ve,{asChild:!0,children:e.jsx(N,{variant:"outline",children:"Cancelar"})}),e.jsx(N,{onClick:()=>{const t=r==null?void 0:r.id;u(null),d(`/registro/${t}`,{replace:!0})},children:"Editar"}),e.jsx(N,{variant:"destructive",type:"submit",onClick:async()=>{if(r!=null&&r.id)try{await y(r.id),A.success("El estudiante fue eliminado correctamente."),u(null),l(!1)}catch(t){A.error("No se pudo eliminar el estudiante. Intenta de nuevo."),console.error("Error al eliminar",t)}},disabled:!0,children:"Eliminar"})]})]})}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(ze,{children:[e.jsx(Fe,{children:a.getHeaderGroups().map(t=>e.jsx(K,{children:t.headers.map(p=>e.jsx(Ke,{children:p.isPlaceholder?null:ee(p.column.columnDef.header,p.getContext())},p.id))},t.id))}),e.jsx(Be,{className:"text-gray-600",children:(v=a.getRowModel().rows)!=null&&v.length?a.getRowModel().rows.map(t=>e.jsx(K,{onClick:()=>{u(t.original),l(!0)},className:"hover:text-muted hover:bg-primary cursor-pointer",children:t.getVisibleCells().map(p=>e.jsx(re,{className:"py-0.5",children:ee(p.column.columnDef.cell,p.getContext())},p.id))},t.id)):e.jsx(K,{children:e.jsx(re,{colSpan:o.length,className:"h-8 text-center",children:"No hay resultados"})})})]})}),e.jsx("div",{className:"flex flex-row justify-end items-center mb-4 sm:mb-0",children:e.jsxs("div",{className:"flex items-center justify-end py-4 space-x-1",children:[e.jsxs(Ye,{disabled:s,defaultValue:"10",onValueChange:async t=>{c(!0);try{C(Number(t))}catch(p){console.log(p),A.error("Error al cambiar el número de filas por página")}finally{c(!1)}},children:[e.jsx(Je,{children:e.jsx(We,{placeholder:"Cantidad"})}),e.jsx(Ze,{children:e.jsxs(er,{children:[e.jsx(rr,{children:"Filas"}),Te.map((t,p)=>e.jsx(or,{value:t.value.toString(),children:t.label},p))]})})]}),e.jsxs(R,{children:[e.jsx(I,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"sm",onClick:async()=>{c(!0);try{await g("first")}catch(t){console.log(t),A.error("Error al cambiar de página")}finally{c(!1)}},disabled:x.prev_page_url===null||s,className:"hover:bg-primary hover:text-white hidden sm:block",children:e.jsx(cr,{})})}),e.jsx(P,{children:"Primera página"})]}),e.jsxs(R,{children:[e.jsx(I,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"sm",onClick:async()=>{c(!0);try{await g("previous")}catch(t){console.log(t),A.error("Error al cambiar de página")}finally{c(!1)}},disabled:x.prev_page_url===null||s,className:"hover:bg-primary hover:text-white",children:e.jsx(tr,{})})}),e.jsx(P,{children:"Página anterior"})]}),e.jsx(mr,{className:"hidden sm:flex mr-1",children:e.jsx(fr,{children:e.jsx(gr,{children:e.jsx(br,{children:m.current_page})})})}),e.jsxs(R,{children:[e.jsx(I,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"sm",onClick:async()=>{c(!0);try{await g("next")}catch(t){console.log(t),A.error("Error al cambiar de página")}finally{c(!1)}},disabled:x.next_page_url===null||s,className:"hover:bg-primary hover:text-white",children:e.jsx(ir,{})})}),e.jsx(P,{children:"Siguiente página"})]}),e.jsxs(R,{children:[e.jsx(I,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"sm",onClick:async()=>{c(!0);try{await g("last")}catch(t){console.log(t),A.error("Error al cambiar de página")}finally{c(!1)}},disabled:x.next_page_url===null||s,className:"hover:bg-primary hover:text-white hidden sm:block",children:e.jsx(ur,{})})}),e.jsx(P,{children:"Última página"})]})]})})]})}te.defaults.withCredentials=!0;te.defaults.withXSRFToken=!0;function Wr(){const{fetchEstudiantes:o,estudiantes:n,pagination:a,pageNumRefs:i,query:l,per_page:s}=le();return h.useEffect(()=>{o(a,l,s)},[a,l,s]),e.jsx("div",{className:"container mx-auto px-6 py-4 lg:px-8 min-h-[68vh]",children:e.jsx(Vr,{columns:hr(Number(i.from)),data:n??[]})})}export{Wr as default};
