import{j as e,L as F,r as C,b as H,B as l,t as _,d as k}from"./index-Bso-p6jD.js";import{B as z,A as B,a as u,b as p,c as g,C as M,d as K,P as O,e as V,f as q,g as $,h as G,i as Q}from"./accordion-sD3OzJ0n.js";import{u as U,D as X,a as J,b as W,c as Y,d as Z,e as E,T as ee,f as se,g as v,h as re,i as S,j as ae,k as w,l as ie}from"./dialog-DxXAEMp1.js";import{T as t,a as d,b as h}from"./tooltip-GYxC3Qg4.js";import{I as le}from"./createLucideIcon-BJ1hQVL1.js";import{t as D}from"./timeFormatter-DNfpeksr.js";import{S as ne,a as oe,b as ce,c as te,d as de,F as he,e as xe,f as me}from"./select-CQID0N0p.js";import{u as P}from"./useEstudiantesStore-CXy15JGF.js";import{P as je}from"./plus-lqA38RdY.js";import"./index-DQwDRUDg.js";import"./react-ZjbKzo2G.js";const ue=o=>[{accessorKey:"id",header:"#",cell:({row:a})=>a.index+o},{id:"acudiente",cell:({row:a})=>a.original.acudiente_id?e.jsx(z,{className:"h-5 min-w-5 rounded-full px-1 font-mono tabular-nums",variant:"secondary",asChild:!0,children:e.jsx(F,{to:"#",children:"A"})}):null},{id:"nombresCompletos",accessorFn:a=>`${a.nombres} ${a.apellidos}`,header:"Nombres completos"},{accessorKey:"edad",header:"Edad"},{accessorKey:"correo",header:"Correo electrónico"},{accessorKey:"telefono",header:"Teléfono"},{accessorKey:"sede.nombre",header:"Sede"},{id:"horario",header:"Horario",accessorFn:a=>`${a.horario.dia_semana}`}];function pe({columns:o,data:a}){var T;const n=U({data:a,columns:o,getCoreRowModel:ie(),manualPagination:!0}),[x,c]=C.useState(!1),[b,ge]=C.useState(),N=H(),{selectEstudiante:f,selectedEstudiante:s,pageNumRefs:R,pageLinks:m,handlePageChange:j,query:A,setQuery:y,setPerPage:L,deleteEstudiante:I}=P();return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"scroll-m-20 flex-wrap text-3xl font-semibold text-primary",children:"Listado de Estudiantes"}),e.jsxs("div",{className:"flex w-full justify-between my-4 gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(le,{type:"search",placeholder:"Buscar",value:A,onChange:r=>y(r.target.value)}),e.jsxs(t,{children:[e.jsx(d,{children:e.jsx(l,{variant:"outline",className:"hover:bg-primary hover:text-white",onClick:()=>y(""),children:"Limpiar"})}),e.jsx(h,{children:"Limpia la barra de búsqueda"})]})]}),e.jsxs(t,{children:[e.jsx(d,{asChild:!0,children:e.jsx(l,{variant:"outline",size:"sm",className:"hover:bg-primary hover:text-white flex justify-self-end h-9 cursor-pointer",onClick:()=>{f(null),N("/registro",{replace:!0})},children:e.jsx(je,{})})}),e.jsx(h,{children:e.jsx("p",{children:"Crea un nuevo registro"})})]})]}),x&&s&&e.jsx(X,{open:x,onOpenChange:c,children:e.jsxs(J,{children:[e.jsx(W,{children:e.jsx(Y,{className:"text-2xl text-left"})}),e.jsxs(B,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(u,{value:"item-1",children:[e.jsx(p,{className:"font-bold text-[16px]",children:"Detalles del Estudiante"}),e.jsxs(g,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombres:"})," "]}),e.jsxs("p",{children:[e.jsx("b",{children:"Edad:"})," ",s.edad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Documento:"})," ",s.tipo_documento," ",s.documento_identidad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo:"})," ",s.correo]}),e.jsxs("p",{children:[e.jsx("b",{children:"Teléfono:"})," ",s.telefono]}),e.jsxs("p",{children:[e.jsx("b",{children:"Dirección:"})," ",s.direccion]}),e.jsxs("p",{children:[e.jsx("b",{children:"RUT:"})," ",s.rut??"N/A"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Acepta el reglamento:"})," ",s.acepta_reglamento?"Sí":"No"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Autoriza uso de imagen:"})," ",s.autoriza_uso_imagen?"Sí":"No"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Observaciones:"})," ",s.observaciones??"N/A"]})]})]}),s.acudiente&&e.jsxs(u,{value:"item-2",children:[e.jsx(p,{className:"font-bold text-[16px]",children:"Detalle del Acudiente"}),e.jsxs(g,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombres:"})," ",s==null?void 0:s.acudiente.nombres," ",s==null?void 0:s.acudiente.apellidos]}),e.jsxs("p",{children:[e.jsx("b",{children:"Documento:"})," ",s==null?void 0:s.acudiente.tipo_documento," ",s==null?void 0:s.acudiente.documento_identidad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Teléfono:"})," ",s==null?void 0:s.acudiente.telefono]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo:"})," ",s==null?void 0:s.acudiente.email]})]})]}),e.jsxs(u,{value:"item-3",children:[e.jsx(p,{className:"font-bold text-[16px]",children:"Detalles de la Sede"}),e.jsxs(g,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombre:"})," ",s==null?void 0:s.sede.nombre]}),e.jsxs("p",{children:[e.jsx("b",{children:"Dirección:"})," ",(s==null?void 0:s.sede.direccion)??"N/A"]})]})]}),e.jsxs(u,{value:"item-4",children:[e.jsx(p,{className:"font-bold text-[16px]",children:"Detalles del Horario"}),e.jsxs(g,{className:"flex flex-col gap-1 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Día de la semana:"})," ",s==null?void 0:s.horario.dia_semana]}),e.jsxs("p",{children:[e.jsx("b",{children:"Hora de inicio:"})," ",D(s==null?void 0:s.horario.hora_inicio)]}),e.jsxs("p",{children:[e.jsx("b",{children:"Hora de fin:"})," ",D(s==null?void 0:s.horario.hora_fin)]})]})]})]}),e.jsxs(Z,{children:[e.jsx(E,{asChild:!0,children:e.jsx(l,{variant:"outline",children:"Cancelar"})}),e.jsx(l,{onClick:()=>{N("/registro",{replace:!0})},children:"Editar"}),e.jsx(l,{variant:"destructive",type:"submit",onClick:async()=>{if(s!=null&&s.id)try{await I(s.id),_.success("El estudiante fue eliminado correctamente."),f(null),c(!1)}catch(r){_.error("No se pudo eliminar el estudiante. Intenta de nuevo."),console.error("Error al eliminar",r)}},disabled:!0,children:"Eliminar"})]})]})}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(ee,{children:[e.jsx(se,{children:n.getHeaderGroups().map(r=>e.jsx(v,{children:r.headers.map(i=>e.jsx(re,{children:i.isPlaceholder?null:S(i.column.columnDef.header,i.getContext())},i.id))},r.id))}),e.jsx(ae,{className:"text-gray-600",children:(T=n.getRowModel().rows)!=null&&T.length?n.getRowModel().rows.map(r=>e.jsx(v,{onClick:()=>{f(r.original),c(!0)},className:"hover:text-muted hover:bg-primary cursor-pointer",children:r.getVisibleCells().map(i=>e.jsx(w,{className:"py-0.5",children:S(i.column.columnDef.cell,i.getContext())},i.id))},r.id)):e.jsx(v,{children:e.jsx(w,{colSpan:o.length,className:"h-8 text-center",children:"No hay resultados"})})})]})}),e.jsx("div",{className:"flex flex-row justify-end items-center mb-4 sm:mb-0",children:e.jsxs("div",{className:"flex items-center justify-end py-4 space-x-1",children:[e.jsxs(ne,{defaultValue:"10",onValueChange:r=>L(Number(r)),children:[e.jsx(oe,{children:e.jsx(ce,{placeholder:"Cantidad"})}),e.jsx(te,{children:e.jsxs(de,{children:[e.jsx(xe,{children:"Filas"}),he.map((r,i)=>e.jsx(me,{value:r.value.toString(),children:r.label},i))]})})]}),e.jsxs(t,{children:[e.jsx(d,{asChild:!0,children:e.jsx(l,{variant:"outline",size:"sm",onClick:()=>j("first"),disabled:m.prev_page_url===null,className:"hover:bg-primary hover:text-white hidden sm:block",children:e.jsx(M,{})})}),e.jsx(h,{children:"Primera página"})]}),e.jsxs(t,{children:[e.jsx(d,{asChild:!0,children:e.jsx(l,{variant:"outline",size:"sm",onClick:()=>j("previous"),disabled:m.prev_page_url===null,className:"hover:bg-primary hover:text-white",children:e.jsx(K,{})})}),e.jsx(h,{children:"Página anterior"})]}),e.jsx(O,{className:"hidden sm:flex mr-1",children:e.jsx(V,{children:e.jsx(q,{children:e.jsx($,{children:R.current_page})})})}),e.jsxs(t,{children:[e.jsx(d,{asChild:!0,children:e.jsx(l,{variant:"outline",size:"sm",onClick:()=>j("next"),disabled:m.next_page_url===null,className:"hover:bg-primary hover:text-white",children:e.jsx(G,{})})}),e.jsx(h,{children:"Siguiente página"})]}),e.jsxs(t,{children:[e.jsx(d,{asChild:!0,children:e.jsx(l,{variant:"outline",size:"sm",onClick:()=>j("last"),disabled:m.next_page_url===null,className:"hover:bg-primary hover:text-white hidden sm:block",children:e.jsx(Q,{})})}),e.jsx(h,{children:"Última página"})]})]})})]})}k.defaults.withCredentials=!0;k.defaults.withXSRFToken=!0;function ke(){const{fetchEstudiantes:o,estudiantes:a,pagination:n,pageNumRefs:x,query:c,per_page:b}=P();return C.useEffect(()=>{o(n,c,b)},[n,c,b]),e.jsx("div",{className:"container mx-auto px-6 py-4 lg:px-8 min-h-[68vh]",children:e.jsx(pe,{columns:ue(Number(x.from)),data:a??[]})})}export{ke as default};
