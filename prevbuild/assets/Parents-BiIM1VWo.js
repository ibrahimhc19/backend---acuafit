import{j as e,L as B,r as t,B as d,d as _}from"./index-C0-eqgIk.js";import{B as F,A as H,a as p,b as j,c as b,C as $,d as z,P as M,e as K,f as w,g as O,h as V,i as U}from"./accordion-DzgTVvqM.js";import{u as q,D as G,a as Q,b as X,c as J,d as W,e as Y,T as Z,f as R,g as v,h as ee,i as S,j as se,k as D,l as ae}from"./dialog-CZqMnU-m.js";import{I as re}from"./createLucideIcon-Cd5aCVpI.js";import{S as le,a as te,b as ne,c as ie,d as oe,f as ce,F as T}from"./select-DSt405Wv.js";import{t as k}from"./timeFormatter-DNfpeksr.js";import"./index-bx9BIsDH.js";const de=c=>[{accessorKey:"id",header:"#",cell:({row:r})=>c+r.index},{id:"acudiente",cell:({row:r})=>r.original.acudiente_id?e.jsx(F,{className:"h-5 min-w-5 rounded-full px-1 font-mono tabular-nums",variant:"secondary",asChild:!0,children:e.jsx(B,{to:"#",children:"A"})}):null},{id:"nombresCompletos",accessorFn:r=>`${r.nombres} ${r.apellidos}`,header:"Nombres completos"},{accessorKey:"edad",header:"Edad"},{accessorKey:"correo",header:"Correo electrónico"},{accessorKey:"telefono",header:"Teléfono"},{accessorKey:"sede.nombre",header:"Sede"},{id:"horario",header:"Horario",accessorFn:r=>`${r.horario.dia_semana}`}];function xe({value:c,options:r,onValueChange:u}){return e.jsxs(le,{value:String(c),onValueChange:l=>u(l),children:[e.jsx(te,{children:e.jsx(ne,{placeholder:String(c)})}),e.jsx(ie,{children:e.jsx(oe,{children:r.map(l=>e.jsx(ce,{value:String(l.value),children:l.label},String(l.value)))})})]})}function ue({columns:c,data:r,pageNumRefs:u,pageLinks:l,handlePageChange:i}){var C;const h=q({data:r,columns:c,getCoreRowModel:ae(),manualPagination:!0}),[s,f]=t.useState(null),[m,x]=t.useState(!1),[a,A]=t.useState("");t.useEffect(()=>{s&&A(`${s.nombres} ${s.apellidos}`)},[s]);const[g,E]=t.useState(""),[I,L]=t.useState([]),[N,y]=t.useState(!1),P=async()=>{if(g.trim()){y(!0);try{const o=await(await fetch(`https://acuafit.up.railway.app/client/buscar?q=${g}`)).json();L(o),console.log(I)}catch(n){console.error("Error fetching data:",n)}finally{y(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"scroll-m-20 flex-wrap text-3xl font-semibold text-primary",children:"Listado de Estudiantes"}),e.jsxs("div",{className:"flex w-full max-w-sm  my-4 gap-2",children:[e.jsx(re,{type:"search",placeholder:"Buscar",value:g,onChange:n=>E(n.target.value)}),e.jsx(d,{type:"submit",variant:"outline",onClick:P,disabled:N,className:"hover:bg-primary hover:text-white",children:N?"Buscando...":"Buscar"}),e.jsx(d,{type:"submit",variant:"outline",className:"hover:bg-primary hover:text-white",children:"Limpiar"})]}),m&&s&&e.jsx(G,{open:m,onOpenChange:x,children:e.jsxs(Q,{children:[e.jsx(X,{children:e.jsx(J,{className:"text-2xl text-left",children:a})}),e.jsxs(H,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(p,{value:"item-1",children:[e.jsx(j,{className:"font-bold text-[16px]",children:"Detalles del Estudiante"}),e.jsxs(b,{className:"flex flex-col gap-4 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombres:"})," ",a]}),e.jsxs("p",{children:[e.jsx("b",{children:"Edad:"})," ",s.edad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Documento:"})," ",s.tipo_documento," ",s.documento_identidad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo:"})," ",s.correo]}),e.jsxs("p",{children:[e.jsx("b",{children:"Teléfono:"})," ",s.telefono]}),e.jsxs("p",{children:[e.jsx("b",{children:"Dirección:"})," ",s.direccion]}),e.jsxs("p",{children:[e.jsx("b",{children:"RUT:"})," ",s.rut??"N/A"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Acepta el reglamento:"})," ",s.acepta_reglamento?"Sí":"No"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Autoriza uso de imagen:"})," ",s.autoriza_uso_imagen?"Sí":"No"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Observaciones:"})," ",s.observaciones]})]})]}),s.acudiente&&e.jsxs(p,{value:"item-2",children:[e.jsx(j,{className:"font-bold text-[16px]",children:"Detalle del Acudiente"}),e.jsxs(b,{className:"flex flex-col gap-4 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombres:"})," ",s==null?void 0:s.acudiente.nombres," ",s==null?void 0:s.acudiente.apellidos]}),e.jsxs("p",{children:[e.jsx("b",{children:"Documento:"})," ",s==null?void 0:s.acudiente.tipo_documento," ",s==null?void 0:s.acudiente.documento_identidad]}),e.jsxs("p",{children:[e.jsx("b",{children:"Teléfono:"})," ",s==null?void 0:s.acudiente.telefono]}),e.jsxs("p",{children:[e.jsx("b",{children:"Correo:"})," ",s==null?void 0:s.acudiente.email]})]})]}),e.jsxs(p,{value:"item-3",children:[e.jsx(j,{className:"font-bold text-[16px]",children:"Detalles de la Sede"}),e.jsxs(b,{className:"flex flex-col gap-4 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Nombre:"})," ",s==null?void 0:s.sede.nombre]}),e.jsxs("p",{children:[e.jsx("b",{children:"Dirección:"})," ",s==null?void 0:s.sede.direccion]})]})]}),e.jsxs(p,{value:"item-4",children:[e.jsx(j,{className:"font-bold text-[16px]",children:"Detalles del Horario"}),e.jsxs(b,{className:"flex flex-col gap-4 text-balance",children:[e.jsxs("p",{children:[e.jsx("b",{children:"Día de la semana:"})," ",s==null?void 0:s.horario.dia_semana]}),e.jsxs("p",{children:[e.jsx("b",{children:"Hora de inicio:"})," ",k(s==null?void 0:s.horario.hora_inicio)]}),e.jsxs("p",{children:[e.jsx("b",{children:"Hora de fin:"})," ",k(s==null?void 0:s.horario.hora_fin)]})]})]})]}),e.jsxs(W,{children:[e.jsx(Y,{asChild:!0,children:e.jsx(d,{variant:"outline",children:"Cancelar"})}),e.jsx(d,{type:"submit",children:"Editar"}),e.jsx(d,{variant:"destructive",type:"submit",disabled:!0,children:"Eliminar"})]})]})}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Z,{children:[e.jsx(R,{children:h.getHeaderGroups().map(n=>e.jsx(v,{children:n.headers.map(o=>e.jsx(ee,{children:o.isPlaceholder?null:S(o.column.columnDef.header,o.getContext())},o.id))},n.id))}),e.jsx(se,{className:"text-gray-600",children:(C=h.getRowModel().rows)!=null&&C.length?h.getRowModel().rows.map(n=>e.jsx(v,{onClick:()=>{f(n.original),x(!0)},className:"hover:text-muted hover:bg-primary cursor-pointer",children:n.getVisibleCells().map(o=>e.jsx(D,{className:"py-0.5",children:S(o.column.columnDef.cell,o.getContext())},o.id))},n.id)):e.jsx(v,{children:e.jsx(D,{colSpan:c.length,className:"h-8 text-center",children:"No hay resultados"})})})]})}),e.jsx("div",{className:"flex flex-row justify-end items-center mb-4 sm:mb-0",children:e.jsxs("div",{className:"flex items-center justify-end py-4 space-x-1",children:[e.jsx(xe,{value:T[0].value,onValueChange:()=>{},options:T}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>i("first"),disabled:l.prev_page_url===null,className:"hover:bg-primary hover:text-white hidden sm:block",children:e.jsx($,{})}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>i("previous"),disabled:l.prev_page_url===null,className:"hover:bg-primary hover:text-white",children:e.jsx(z,{})}),e.jsx(M,{className:"hidden sm:flex mr-1",children:e.jsx(K,{children:e.jsx(w,{children:e.jsx(O,{children:u.current_page})})})}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>i("next"),disabled:l.next_page_url===null,className:"hover:bg-primary hover:text-white",children:e.jsx(V,{})}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>i("last"),disabled:l.next_page_url===null,className:"hover:bg-primary hover:text-white hidden sm:block",children:e.jsx(U,{})})]})})]})}_.defaults.withCredentials=!0;_.defaults.withXSRFToken=!0;function ve(){const[c,r]=t.useState([]),[u,l]=t.useState({current_page:1,last_page:1,per_page:10,from:0,to:0,total:0,next_page:null}),[i,h]=t.useState({first_page_url:"",last_page_url:"",next_page_url:null,prev_page_url:null}),[s,f]=t.useState("https://acuafit.up.railway.app/client/estudiantes"),m=x=>{let a=null;switch(x){case"first":a=i.first_page_url;break;case"previous":a=i.prev_page_url;break;case"next":a=i.next_page_url;break;case"last":a=i.last_page_url;break}a!==null&&f(a)};return t.useEffect(()=>{_.get(s).then(x=>{const a=x.data;a&&a.data&&Array.isArray(a.data)?(l({...a}),h({...a}),r(a.data)):(console.error("La respuesta de la API no tiene el formato esperado:",a),r([]))}).catch(x=>{console.error("Error al obtener los datos:",x),r([])})},[s]),e.jsx("div",{className:"container mx-auto px-6 py-4 lg:px-8 min-h-[68vh]",children:e.jsx(ue,{columns:de(Number(u.from)),data:c,handlePageChange:m,pageNumRefs:u,pageLinks:i})})}export{ve as default};
